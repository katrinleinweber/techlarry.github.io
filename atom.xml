<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[techlarry]]></title>
  <link href="http://larryim.cc/atom.xml" rel="self"/>
  <link href="http://larryim.cc/"/>
  <updated>2017-08-14T14:17:04+08:00</updated>
  <id>http://larryim.cc/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="http://www.mweb.im/">MWeb</generator>
  
  <entry>
    <title type="html"><![CDATA[Python and MySQL]]></title>
    <link href="http://larryim.cc/15026944183320.html"/>
    <updated>2017-08-14T15:06:58+08:00</updated>
    <id>http://larryim.cc/15026944183320.html</id>
    <content type="html"><![CDATA[
<p>There are a lot of python driver available for MySQL and two stand out the most. The one, traditionally everybody’s choice, sort of industrial standard <code>MySQLdb</code>. It uses a C module to link to MySQL’s client library.  For Python3, use PyMySQL instead, because <code>MySQLdb</code> don&#39;t support Python3. Oracle’s <code>mysql-connector</code> on the other hand is pure python so no MySQL libraries and no compilation is necessary.</p>

<h2 id="toc_0">MySQL Connector/Python</h2>

<p>To use Python with MySQL, you can use the MySQL Connector/Python (<a href="https://dev.mysql.com/downloads/connector/python/">Download Here</a>). For those with anaconda, just install with <code>conda</code>:</p>

<pre><code>conda install -c anaconda mysql-connector-python 
</code></pre>

<p>MySQL Connector/Python includes support for:</p>

<ul>
<li>Almost all features provided by MySQL Server.</li>
<li>Converting parameter values back and forth between Python and MySQL data types.</li>
<li>All MySQL extensions to standard SQL syntax.</li>
</ul>

<pre><code class="language-python">import re
import mysql.connector

# establishes the connection to MySQL.
cnx = mysql.connector.connect(user=&#39;root&#39;, password=&#39;8032804254qq&#39;,
                              host=&#39;127.0.0.1&#39;, database=&#39;rookery&#39;, port=&#39;3306&#39;)

# creates a cursor object (cur) to use for executing queries on the database.


cur = cnx.cursor(buffered=True)

# query mysql database for list of user accounts
sql_stmnt = &quot;SELECT DISTINCT User, Host FROM mysql.db &quot;
sql_stmnt += &quot;WHERE Db IN(&#39;rookery&#39;,&#39;birdwatchers&#39;) &quot;
sql_stmnt += &quot;ORDER BY User, Host&quot;
cur.execute(sql_stmnt)

# loop through list of user accounts
for user_accounts in cur.fetchall():
    user_name = user_accounts[0]
    host_address = user_accounts[1]
    user_account = user_name.decode(&#39;utf-8&#39;) + &quot;@&quot; + host_address.decode(&#39;utf-8&#39;)

# display user account heading
print(&#39;User Account:&#39;, (user_name, host_address))
print(&quot;------------------------------------------&quot;)

# query mysql for grants for user account
sql_stmnt = &quot;show grants for &quot; + user_account
cur.execute(sql_stmnt)

# loop through grant entries for user account
for grants in cur.fetchall():
    # skip &#39;usage&#39; entry
    if re.search(&#39;USAGE&#39;, grants[0]):
        continue
    # extract name of database and table
    dbtb = re.search(&#39;ON\s(.*)\.+?(.+?)\sTO&#39;, grants[0])
    db = dbtb.group(1)
    tb = dbtb.group(2)

    # change wildcard for tables to &#39;all&#39;
    if re.search(&#39;\*&#39;, tb): tb = &quot;all&quot;

    # display database and table name for privileges
    print(&quot;database: &quot;, db, &quot;table: &quot;, tb)

    # extract and display privileges for user account # for database and table
    privs = re.search(&#39;GRANT\s(.+?)\sON&#39;, grants[0])
    print(&#39;privileges: &#39;, privs.group(1))

cur.close()
cnx.close()
</code></pre>

<h2 id="toc_1">PyMySQL</h2>

<p><a href="https://github.com/PyMySQL/PyMySQL">PyMySQL</a> is to be a drop-in replacement for <code>MySQLdb</code> and work on <code>CPython</code>, <code>PyPy</code> and <code>IronPython</code>.</p>

<h3 id="toc_2">Installation</h3>

<pre><code class="language-bash">$ pip install PyMySQL
</code></pre>

<h3 id="toc_3">Example</h3>

<pre><code class="language-python">import pymysql

# connect to the datacase
connection = pymysql.connect(host=&#39;localhost&#39;, user=&#39;root&#39;, password=&#39;8032804254qq&#39;, db=&#39;test&#39;)

with connection.cursor() as cursor:
    &quot;&quot;&quot;
    Create Table | CREATE TABLE `books` (
    `book_id` int(3) NOT NULL AUTO_INCREMENT,
    `title` text DEFAULT NULL,
    `status` bit(1) DEFAULT b&#39;0&#39;,
    PRIMARY KEY (`book_id`)
    ) ENGINE=MyISAM AUTO_INCREMENT=103 DEFAULT CHARSET=utf8
    &quot;&quot;&quot;
    # create a new record
    sql = &quot;INSERT INTO `books` (`title`, `status`) VALUES (%s, %s)&quot;
    cursor.execute(sql, (&#39;GRE Reading&#39;, 1))
    
    # connection is not autocommit by default. So you must commit to save your changes.
    connection.commit()

with connection.cursor() as cursor:
    sql = &quot;select `book_id`, `title`, `status` from `books`&quot;
    cursor.execute(sql)
    # read records
    for book in cursor.fetchall():
        book = list(book)
        book[2] = ord(book[2])
        print(book)
</code></pre>

<h2 id="toc_4">Difference? which is better?</h2>

<p><code>MySQLdb</code> is a thin python wrapper around C module which implements API for MySQL database.</p>

<p><code>MySQL Connector</code>is a Python module that reimplements the <a href="https://www.python.org/dev/peps/pep-0249/"><code>MySQL Database API</code></a> in Python. It is written in Python and does not have any dependencies except for the Python Standard Library. It is slower, but does not require the C library and so is more portable.</p>

<h3 id="toc_5">Query Performance</h3>

<p>Obviously, <code>MySQLdb</code> has better performance, especially when it comes to large data sets.</p>

<p><img src="media/15026944183320/Untitled.png" alt="Untitled"/></p>

<h2 id="toc_6">Reference</h2>

<p>1.<a href="https://stackoverflow.com/questions/32575857/the-differences-between-mysqldb-and-mysqlconnector">The differences between MySQLdb and mysqlconnector</a><br/>
2.<a href="http://charlesnagy.info/it/python/python-mysqldb-vs-mysql-connector-query-performance">Python MySQLdb vs mysql-connector query performance</a><br/>
3. <a href="https://wiki.openstack.org/wiki/PyMySQL_evaluation">PyMySQL evaluation</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[逻辑删除]]></title>
    <link href="http://larryim.cc/15026939409542.html"/>
    <updated>2017-08-14T14:59:00+08:00</updated>
    <id>http://larryim.cc/15026939409542.html</id>
    <content type="html"><![CDATA[
<p><strong>逻辑删除</strong>：当数据非常重要时，在实际执行删除操作时，只是将数据标记为删除。在数据查询操作时，加上是否删除语句。</p>

<pre><code class="language-SQL">mysql&gt; alter table birds add column isDelete bit default b&#39;0&#39;;
mysql&gt; update birds
    -&gt; set isDelete = b&#39;1&#39;
    -&gt; where bird_id = 101;
mysql&gt; select count(*)
    -&gt; from birds
    -&gt; where `isDelete` = 0;
+----------+
| count(*) |
+----------+
| 28890    |
+----------+
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Regular Expression in MySQL]]></title>
    <link href="http://larryim.cc/Regular%20Expression%20in%20MySQL.html"/>
    <updated>2017-08-14T14:08:00+08:00</updated>
    <id>http://larryim.cc/Regular%20Expression%20in%20MySQL.html</id>
    <content type="html"><![CDATA[
<p><code>MySQL</code> support pattern-matching operations performed with the <code>REGEXP</code> operator in SQL statements.</p>

<pre><code class="language-SQL">mysql &gt; select common_name as &#39;Birds Great and Small&#39;
      -&gt; from birds
      -&gt; where common_name regexp &#39;Least|Great&#39;
      -&gt; order by common_name desc
      -&gt; limit 10;

+-----------------------+
| Birds Great and Small |
+-----------------------+
| Least Tern            |
| Least Storm-Petrel    |
| Least Seedsnipe       |
| Least Sandpiper       |
| Least Pygmy-Owl       |
| Least Pauraque        |
| Least Nighthawk       |
| Least Honeyguide      |
| Least Grebe           |
| Least Flycatcher      |
+-----------------------+

</code></pre>

<p><code>REGEXP</code> Operator is case insensitive. If we want an expression to be case sensitive, we&#39;ll need to add the <code>Binary</code> option.</p>

<pre><code class="language-SQL">mysql &gt; select common_name as &#39;Hawks&#39;
      -&gt; from birds
      -&gt; where common_name regexp binary &#39;Hawk&#39;
      -&gt; and common_name not regexp &#39;Hawk-Owl&#39;
      -&gt; order by family_id
      -&gt; limit 10;
+------------------------+
| Hawks                  |
+------------------------+
| Ornate Hawk-Eagle      |
| Wallace&#39;s Hawk-Eagle   |
| Pinsker&#39;s Hawk-Eagle   |
| Philippine Hawk-Eagle  |
| Sulawesi Hawk-Eagle    |
| Javan Hawk-Eagle       |
| Blyth&#39;s Hawk-Eagle     |
| Mountain Hawk-Eagle    |
| Flores Hawk-Eagle      |
| Madagascar Cuckoo-Hawk |
+------------------------+
</code></pre>

<h2 id="toc_0">Syntax of Regular Expressions</h2>

<ul>
<li><code>^</code>: Match the beginning of a string</li>
<li><code>$</code>: Match the end of a string</li>
<li><code>.</code>: Match any character</li>
<li><code>a*</code>: Match any sequence of zero or more <code>a</code> characters</li>
<li><code>a+</code>: Match any sequence of one or more <code>a</code> characters</li>
<li><code>a?</code>: Match either zero or one <code>a</code> character</li>
<li><code>de|abc</code>: Match either of the sequences <code>de</code> or <code>abc</code></li>
<li><code>(abc)*</code>: Match zero or more instances of the sequence <code>abc</code></li>
</ul>

<h2 id="toc_1">Rescources</h2>

<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/regexp.html">Regular Expressions</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Deep Learning]]></title>
    <link href="http://larryim.cc/15025954300059.html"/>
    <updated>2017-08-13T11:37:10+08:00</updated>
    <id>http://larryim.cc/15025954300059.html</id>
    <content type="html"><![CDATA[

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Latex 技巧]]></title>
    <link href="http://larryim.cc/15025903235887.html"/>
    <updated>2017-08-13T10:12:03+08:00</updated>
    <id>http://larryim.cc/15025903235887.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">Latex 查询</h2>

<p>可以在<code>Dash</code>中下载Latex Cheat Sheet以便随时查询。</p>

<h2 id="toc_1">Latex 如何将下标放在正上方／正下方</h2>

<p>在 <code>\sum</code>，<code>\max</code>等之后添加<code>\limits^{upper}_{lower}</code>：\(\sum\limits^{upper}_{lower}\)</p>

<p>例如：<br/>
\(cost(i,j) = \sum \limits^{j}_{k=i}freq[k] + \min \limits_{r=i}^j\)</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tensorflow]]></title>
    <link href="http://larryim.cc/15025274631841.html"/>
    <updated>2017-08-12T16:44:23+08:00</updated>
    <id>http://larryim.cc/15025274631841.html</id>
    <content type="html"><![CDATA[
<p><a href="https://www.tensorflow.org">Tensorflow</a> is an open-source software library for Machine Intelligence.</p>

<h2 id="toc_0">Install</h2>

<p>Using <code>conda</code> tool under <code>Anaconda</code> to install tensorflow is a very convent and direct way.</p>

<h2 id="toc_1">Learning Resources</h2>

<ol>
<li><a href="https://web.stanford.edu/class/cs20si/">CS 20SI: Tensorflow for Deep Learning Research</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MySQL(3): Storage Engines]]></title>
    <link href="http://larryim.cc/15025201109276.html"/>
    <updated>2017-08-12T14:41:50+08:00</updated>
    <id>http://larryim.cc/15025201109276.html</id>
    <content type="html"><![CDATA[
<p>You can use the <code>SHOW TABLE STATUS</code> command to display information about tables, which include types of storage engines.</p>

<pre><code class="language-sql">mysql root@localhost:rookery&gt; show table status\G
***************************[ 1. row ]***************************
Name            | bird_families
Engine          | InnoDB
Version         | 10
Row_format      | Dynamic
Rows            | 12
Avg_row_length  | 1365
Data_length     | 16384
Max_data_length | 0
Index_length    | 16384
Data_free       | 0
Auto_increment  | 113
Create_time     | 2017-08-11 00:18:18
Update_time     | 2017-08-12 13:11:47
Check_time      | &lt;null&gt;
Collation       | latin1_bin
Checksum        | &lt;null&gt;
Create_options  |
Comment         |
</code></pre>

<h2 id="toc_0">InnoDB</h2>

<p><code>InnoDB</code> is the default transactional storage engine for MySQL and the most important and broadly useful engine overall. <em>You should use InnoDB for your tables unless you have a compelling need to use a different engine</em>.</p>

<h2 id="toc_1">Reference</h2>

<ol>
<li>Baron S, Peter Z, Vadim T. 2012. High Performance MySQL 3rd Edition.</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NP-completeness]]></title>
    <link href="http://larryim.cc/15023384623586.html"/>
    <updated>2017-08-10T12:14:22+08:00</updated>
    <id>http://larryim.cc/15023384623586.html</id>
    <content type="html"><![CDATA[
<p><code>NP</code> stands for <code>None-deterministic Polynomial</code>. This means that the problem can be solved in Polynomial time using a None-deterministic Turing machine.</p>

<h2 id="toc_0">Polynomial-Time Solvability</h2>

<p>A problem is <code>polynomial-time solvable</code> if there is an algorithm that correctly solves it in \(O(n^k)\) time, for some constant \(k\).</p>

<p>Definition: P = the set of polynomial-time solvable problems.</p>

<h2 id="toc_1">Reference</h2>

<ul>
<li><a href="https://stackoverflow.com/questions/210829/what-is-an-np-complete-in-computer-science">What is an NP-complete in computer science?</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dynamic Programming (4): Optimal Binary Search Tree]]></title>
    <link href="http://larryim.cc/Dynamic_Programming_Optimal_Binary_Search_Tree.html"/>
    <updated>2017-08-09T16:42:39+08:00</updated>
    <id>http://larryim.cc/Dynamic_Programming_Optimal_Binary_Search_Tree.html</id>
    <content type="html"><![CDATA[
<p>An <code>Optimal Binary Search Tree (Optimal BST)</code> is a binary search tree which provides the smallest possible search time for a given sequence of access probabilities. The cost of a BST node is the level of that node plus one multiplied by its frequency.</p>

<p><strong>Problem Statement</strong>: Given a sorted array \(keys[0.. n-1]\) of search keys and an array \(freq[0.. n-1]\) of frequency counts, where \(freq[i]\) is the number of searches to \(keys[i]\). Construct a binary search tree of all keys such that the total cost of all the searches is as small as possible.</p>

<h2 id="toc_0">Optimal Substructure</h2>

<p>The optimal cost of node \(i,...,j\) can be recursively calculated using the following formula.</p>

<p>\(Cost(i,j) = \sum \limits^{j}_{k=i}freq[k] + \min \limits_{r=i}^j[Cost(i,r-1)+Cost(r+1,j)]\)</p>

<p>We try all nodes one by one as root (\(r\) varies from \(i\) to \(j\)). When we make \(r\)th node as root, we recursively calculate optimal cost from \(i\) to \(r-1\) and \(r+1\) to \(j\). </p>

<h3 id="toc_1">Implementation: top-down with memoization</h3>

<pre><code class="language-python">def optimal_bst(freq):
    def opt_cost(hash_table, freq, i, j):
        &quot;&quot;&quot;
        Optimal Binary Search Tree
        Recursive Method used here
        &quot;&quot;&quot;

        # base case: only 0~1 element
        if j &lt; i:
            return 0
        if j == i:
            return freq[i]

        # if already exists
        if (i, j) in hash_table:
            return hash_table[(i, j)]

        min_cost = sys.maxsize
        for r in range(i, j + 1):
            cost = opt_cost(hash_table, freq, i, r - 1) + opt_cost(hash_table, freq, r + 1, j)
            if cost &lt; min_cost:
                min_cost = cost

        hash_table[(i, j)] = sum(freq[i:j + 1]) + min_cost
        return hash_table[(i, j)]

    return opt_cost({}, freq, 0, len(freq) - 1)
</code></pre>

<h2 id="toc_2">Reference</h2>

<ul>
<li><a href="http://ac.els-cdn.com/S0304397596003209/1-s2.0-S0304397596003209-main.pdf?_tid=1505980e-7cd4-11e7-83de-00000aacb361&amp;acdnat=1502263778_53b76d131a06906e9fe3adfadc778677">Optimal Binary Search Tree</a></li>
<li><a href="http://www.geeksforgeeks.org/dynamic-programming-set-24-optimal-binary-search-tree/">Optimal Binary Search Tree GeeksforGeeks</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dynamic Programming (3): 0-1 Knapsack Problem]]></title>
    <link href="http://larryim.cc/Dynamic_Programming_Knapsack_Problem.html"/>
    <updated>2017-08-09T16:41:03+08:00</updated>
    <id>http://larryim.cc/Dynamic_Programming_Knapsack_Problem.html</id>
    <content type="html"><![CDATA[
<p>The most common problem being solved is the <code>0-1 knapsack problem</code>, which restricts the number \(w_i\) of copies of each kind of item to zero or one. Given a set of \(n\) items numbered from 1 up to \(n\), each with a weight \(w_i\) and a value \(v_i\), along with a maximum weight capacity \(W\),</p>

<p>\[\begin{equation}<br/>
\begin{split}<br/>
&amp;\text{maximize} \sum_{i=1}^nv_ix_i\\<br/>
&amp;\text{subject to} \sum_{i=1}^n w_ix_i \le W \quad \text{and} \quad x_i \in \{0,1\}\\<br/>
\end{split}<br/>
\end{equation}\]</p>

<p>Informally, the problem is to maximize the sum of the values of the items in the knapsack so that the sum of the weights is less than or equal to the knapsack&#39;s capacity.</p>

<h2 id="toc_0">Bottom-up method</h2>

<h3 id="toc_1">Solving</h3>

<p>Assume \(w_i, w_2,..., w_n, W\) are strictly positive integers. Define \(m[i,w]\) to be the maximum value that can be attained with weight less than or queal to \(w\) using items up to \(i\) (first \(i\) items).</p>

<p>We can define \(m[i,w]\) recursively as follows:</p>

<ul>
<li>\(m[0, w]=0 \)</li>
<li>\(m[i,w]=m[i-1, w]\) \(if w_i &gt; w\) ( the new item is more than the current weight limit)</li>
<li>\(m[i,w]= max(m[i-1,w],m[i-1,w-w_i]+v_i\)) if \(w_i \le w\)</li>
</ul>

<p>The following is pseudo code for the dynamic program:</p>

<pre><code class="language-python">// Input:
// Values (stored in array v)
// Weights (stored in array w)
// Number of distinct items (n)
// Knapsack capacity (W)
  
for j from 0 to W do:
     m[0, j] := 0
  
for i from 1 to n do:
    for j from 0 to W do:
        if w[i] &gt; j then:
            m[i, j] := m[i-1, j]
        else:
            m[i, j] := max(m[i-1, j], m[i-1, j-w[i]] + v[i])
</code></pre>

<h3 id="toc_2">Implementation</h3>

<pre><code class="language-python">def knapsack01(value, weight, w_size):
    &quot;&quot;&quot;
    kanapsack01 solves a 0-1 knapsack problem,
    input: values(value) and weights(W) of items to put into knapsack ( size of which is w_size)
    output: the index of items that maximize the value of items putted in the knapsack
    the index of items counts from 0, and corresponding value
    &quot;&quot;&quot;
    n = len(value)  # the number of items
    # maximum value that can be attained with weight &lt;= weight using first i items
    m = np.zeros(shape=(n+1, w_size+1), dtype=int)
    for i in range(w_size+1):
        m[0, i] = 0

    if not isinstance(w_size, int):
        raise ValueError(&#39;knapsack_size should be an integer&#39;)

    for i in range(1, n+1):  # items
        for j in range(1, w_size+1):  # sizes
            if weight[i-1] &gt; j:
                m[i, j] = m[i - 1, j]
            else:
                m[i, j] = max(m[i - 1, j], m[i - 1, j - weight[i-1]] + value[i-1])

    max_val = m[-1, -1]
    items = set()

    while max_val &gt; 0 and i &gt; 0:
        if max_val - value[i-1] in m[i - 1, :]:
            max_val = max_val - value[i-1]
            items.add(i-1)
            i -= 1
        else:
            i -= 1
    return items, m[-1, -1]
</code></pre>

<h2 id="toc_3">top-down with memoization</h2>

<pre><code class="language-python">def knapsack01_recursive(hash_table, value, weight, i, j):
    # base case: when 1 items here
    if i == 1:
        if weight[i - 1] &lt; j:
            hash_table[(i, j)] = value[i - 1]
            return value[i - 1]
        else:
            hash_table[(i, j)] = 0
        return 0

    # sub-problem computed
    if (i, j) in hash_table:
        return hash_table[(i, j)]
    else:
        if weight[i - 1] &gt; j:
            # only case 1
            hash_table[(i, j)] = knapsack01_recursive(hash_table, value, weight, i - 1, j)
        else:
            #  case 1, item i-1 excluded
            case1 = knapsack01_recursive(hash_table, value, weight, i - 1, j)
            # case 2, item i-1 included
            case2 = knapsack01_recursive(hash_table, value, weight, i - 1, j - weight[i - 1]) + value[i - 1]
            hash_table[(i, j)] = max(case1, case2)

    return hash_table[(i, j)]
</code></pre>

<h2 id="toc_4">Reference</h2>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Knapsack_problem#cite_ref-plateau85_15-0">Knapsack Problem WIKIPEDIA</a></li>
<li><a href="https://stackoverflow.com/questions/5683066/knapsack-problem-classic">Knapsack problem Stack Overflow</a></li>
<li><a href="http://www.es.ele.tue.nl/education/5MC10/Solutions/knapsack.pdf">The knapsack Problem PPT</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dynamic Programming (2): Minimum weight independent set]]></title>
    <link href="http://larryim.cc/Dynamic_Programming_Minimum_weight_independent_set.html"/>
    <updated>2017-08-09T22:52:15+08:00</updated>
    <id>http://larryim.cc/Dynamic_Programming_Minimum_weight_independent_set.html</id>
    <content type="html"><![CDATA[
<p><strong>Input</strong>: A path graph \(G=(V,E)\) with nonnegative weights on vertices.<br/>
<strong>Output</strong>: an <code>independent set</code> of maximum total weight.</p>

<p><strong>Background</strong>:<br/>
A <code>path graph</code> is a tree with two nodes of vertex degree 1, and the other \(n-2\) nodes of vertex degree 2. A path graph is therefore a graph that can be drawn so that all of its vertices and edges lie on a single straight line.</p>

<p>A <code>Independent set</code> is a set of vertices in a graph, no two of which are adjacent.</p>

<h2 id="toc_0">Proposed algorithm</h2>

<ul>
<li>Recursively compute \(S_1=\) max-weight independent set of \(G&#39;\)
rsively compute \(S_2=\) max-weight independent set of \(G&quot;\)</li>
<li>Return \(S_1\) or \(S_2 \cup{v_n}\), whichever is better.</li>
</ul>

<h3 id="toc_1">Implementation</h3>

<pre><code class="language-python">def maximum_weight_independent_set(weights):
    &quot;&quot;&quot;
    Compute Maximum weight independent set for a path graph.
    Weights of vertexes in the path graph are given.
    Return maximum weight independent set.
    &quot;&quot;&quot;
    num = len(weights)
    a = [0] * (num + 1)
    in_set = []  # independent set
    a[0], a[1] = 0, weights[0]

    for i in range(2, num + 1):
        a[i] = max(a[i - 1], a[i - 2] + weights[i - 1])

    while i &gt;= 1:
        if a[i - 1] &gt;= a[i - 2] + weights[i - 1]:
            i -= 1
        else:
            in_set.append(i - 1)
            i -= 2
    in_set.reverse()
    return in_set
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dynamic Programming (1): Introduction]]></title>
    <link href="http://larryim.cc/Dynamic_Programming_Introduction.html"/>
    <updated>2017-08-08T15:48:13+08:00</updated>
    <id>http://larryim.cc/Dynamic_Programming_Introduction.html</id>
    <content type="html"><![CDATA[
<ul>
<li>
<a href="#toc_0">Dynamic programming v.s. Divide-and-conquer algorithm</a>
</li>
<li>
<a href="#toc_1">Approach</a>
<ul>
<li>
<a href="#toc_2">Top-down with memoization</a>
</li>
<li>
<a href="#toc_3">Bottom-up method</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_4">****## Which Method?</a>


<p><code>Dynamic programming</code> is a method for solving a complex problem by breaking it down into a collection of simpler subproblems, solving each of those subproblems just once, and storing their solutions. It stores solutions to subproblems instead of recomputing them(called <code>memoization</code> technique).</p>

<h2 id="toc_0">Dynamic programming v.s. Divide-and-conquer algorithm</h2>

<p><code>Divide-and-conquer</code> algorithms partition the problem into disjoint subproblems, solve the subproblems recursively, and then combine their solutions to solve the original problem. In contrast, <code>dynamic programming</code> partition the problem into subproblems that overlaps, that is, subproblems share subproblems.</p>

<h2 id="toc_1">Approach</h2>

<p>There are usually two equivalent ways to implement a dynamic-programming approach.</p>

<h3 id="toc_2">Top-down with memoization</h3>

<p>We write the procedure recursively in a natural manner, but modified to save the result of each subproblem in the hash table. The procedure first checks to see whether it has previously solved this subproblem. If so, it returns the saved value, saving further computation at this level; if not, the procedure computes the value in the usual manner. </p>

<h3 id="toc_3">Bottom-up method</h3>

<p>We sort the subproblems by size and solve them in size order, smallest first. When solving a particular subproblem, we have already solved all of the smaller subproblems its solution depends upon, and we have saved their solutions. We solve each subproblem only once, and when we first see it, we have already solved all of its prerequisite subproblems.</p>

<h1 id="toc_4">****## Which Method?</h1>

<ul>
<li>Top-down approach often results in slightly simpler and clearer code</li>
<li>Top-down approach only computes the partial results that are needed for the particular problem instance, whereas the bottom-up approach computes all partial results even if some of them go unused.</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Huffman Coding]]></title>
    <link href="http://larryim.cc/15020346646852.html"/>
    <updated>2017-08-06T23:51:04+08:00</updated>
    <id>http://larryim.cc/15020346646852.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">Implementation</h2>

<pre><code class="language-python">from queue import PriorityQueue

class HuffmanNode:
    def __init__(self, left, right):
        self.left_child = left
        self.right_child = right


def huffman_coding(freqs):
    pq = PriorityQueue()
    for value in freqs:
        pq.put(value)

    while pq.qsize() &gt; 1:
        l, r = pq.get(), pq.get()
        node = HuffmanNode(l, r)
        pq.put((l[0]+r[0], node))
    return pq.get()


def walk_tree(node, prefix=&quot;&quot;, code={}):
    if isinstance(node[1], HuffmanNode):
        walk_tree(node[1].left_child, prefix + &quot;0&quot;, code)
        walk_tree(node[1].right_child, prefix + &quot;1&quot;, code)
    else:
        code[node[1]] = prefix

    return code




freq = [ (8.167, &#39;a&#39;), (1.492, &#39;b&#39;), (2.782, &#39;c&#39;), (4.253, &#39;d&#39;),
    (12.702, &#39;e&#39;), (2.228, &#39;f&#39;), (2.015, &#39;g&#39;), (6.094, &#39;h&#39;),
    (6.966, &#39;i&#39;), (0.153, &#39;j&#39;), (0.747, &#39;k&#39;), (4.025, &#39;l&#39;),
    (2.406, &#39;m&#39;), (6.749, &#39;n&#39;), (7.507, &#39;o&#39;), (1.929, &#39;p&#39;),
    (0.095, &#39;q&#39;), (5.987, &#39;r&#39;), (6.327, &#39;s&#39;), (9.056, &#39;t&#39;),
    (2.758, &#39;u&#39;), (1.037, &#39;v&#39;), (2.365, &#39;w&#39;), (0.150, &#39;x&#39;),
    (1.974, &#39;y&#39;), (0.074, &#39;z&#39;)]

root_node = huffman_coding(freq)
code = walk_tree(root_node)
for i in sorted(freq, reverse=True):
    print(i[1], &#39;{:6.2f}&#39;.format(i[0]), code[i[1]])
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clustering on big graph]]></title>
    <link href="http://larryim.cc/clustering%20on%20big%20graph.html"/>
    <updated>2017-08-05T14:51:39+08:00</updated>
    <id>http://larryim.cc/clustering%20on%20big%20graph.html</id>
    <content type="html"><![CDATA[
<p><strong>Question</strong>: what is the largest value of k such that there is a <code>k-clustering</code> with spacing at least 3?  That is, how many clusters are needed to ensure that no pair of nodes with all but 2 bits in common get split into different clusters?</p>

<p><strong>Input</strong>: <br/>
[first bit of node 1] … [last bit of node 1]<br/>
[first bit of node 2] … [last bit of node 2]</p>

<p>For example, the third line of the file “0 1 1 0 0 1 1 0 0 1 0 1 1 1 1 1 1 0 1 0 1 1 0 1″ denotes the 24 bits associated with node #2.</p>

<p><strong>Background</strong>:<br/>
The distance between two nodes \(u\) and \(v\) in this problem is defined as the <code>Hamming distance</code>--- the number of differing bits --- between the two nodes&#39; labels. </p>

<p><strong>Note</strong>: NOTE: The graph implicitly defined by the data file is so big that you probably can&#39;t write it out explicitly, let alone sort the edges by cost. So you will have to be a little creative to complete this part of the question. For example, is there some way you can identify the smallest distances without explicitly looking at every pair of nodes?</p>

<h2 id="toc_0">METHOD</h2>

<ul>
<li>We put all the nodes into a hash table, which of size is \(2^n\), where \(n=24\) is the length of input bits. </li>
</ul>

<p><strong>Detail</strong>: We use <code>list</code> to represent the hash table in python, of which index will be the numerical value of the input, and value will be the node number index. The node number index also denotes where each node is own cluster (i.e index of cluster).</p>

<ul>
<li>In order to find a \(k\)-clustering with spacing at least 3, we just need to find neighbors that the distance between neighbors and nodes are 1 or 2.</li>
</ul>

<p><strong>Detail</strong>: We use bit manipulation to find potential   neighbors of a node. According to <code>Hamming distance</code>, the distance means the number of differing bits. Since the distance should be 1 or 2, neighbor of node are such points that differ  from node in no more than 2 bits. Total number of potential neighbor is \(C^2_{24}+C^1_{24} = 300\) . The property of XOR is used to compute its neighbors directly: </p>

<pre><code class="language-python">if x ^ y == z: 
    x ^ z = y 
</code></pre>

<p>Hence, In order to find neighbors \(y\), we just compute <code>x^z</code>, where \(z\) is no more than 3 1s in the 24-bit binary integer.</p>

<ul>
<li>In order to keep track of connected clusters, the <code>disjoint-set</code> data structure is used here.</li>
</ul>

<h2 id="toc_1">Procedure</h2>

<pre><code class="language-python">for each node in Graph (200K iterations):
    for each code that is 0 or 1 or 2 units apart from this vertex:
        Add these 2 vertexes to a cluster.
</code></pre>

<h2 id="toc_2">Implementation</h2>

<pre><code class="language-python">class HashTable:
    def __init__(self, size):
        self.size = size
        self.slots = [None for i in range(self.size)]

    def add(self, key, value):
        if self.slots[key]:
            self.slots[key].append(value)
        else:
            self.slots[key] = [value]

    def values(self):
        key = 1
        for val in self.slots:
            if val:
                yield (key, val)
        key += 1


class BigClustring:

    def __init__(self):
        self.hash_table = None
        self.num = None
        self.len_bit = None
        self.disjoint_set = DisjointSet()
        self.val = []

    def read_from_file(self, file_name):
        with open(file_name) as infile:
            line = infile.readline()
            line = line.strip(&#39;\n&#39;)
            self.num, self.len_bit = [int(num) for num in line.split()]
            self.hash_table = HashTable(2 ** self.len_bit)

            node = 1
            for line in infile.readlines():
                line = line.strip(&#39;\n&#39;)
                line = line.replace(&#39; &#39;, &#39;&#39;)
                val = int(line, 2)
                self.hash_table.add(val, node)
                self.disjoint_set.make_set(node)
                self.val.append(val)
                node += 1

        if self.num + 1 != node:
            raise ValueError

    def hamming(self):
        &quot;&quot;&quot;
        return binary integer at hamming distance 1 or 2
        &quot;&quot;&quot;
        self.hamm = []
        for i in range(self.len_bit):
            for j in range(self.len_bit):
                self.hamm.append(1 &lt;&lt; i | 1 &lt;&lt; j)

    def neighbors(self, val):
        &quot;&quot;&quot;
        return node_index of neighbors for val
        &quot;&quot;&quot;
        for key in self.hamm:
            if self.hash_table.slots[key ^ val] is not None:
                yield self.hash_table.slots[key ^ val][0]

    def cluster(self):
        &quot;&quot;&quot;
        cluster nodes with 0-1-2 distances
        &quot;&quot;&quot;

        # first cluster the 0 distance nodes
        for key, val in self.hash_table.values():
            if len(val) &gt; 1:
                # union
                for val1 in val:
                    for val2 in val:
                        if val1 != val2:
                            self.disjoint_set.union(val1, val2)

        # second cluster the 1-2 distance nodes
        node = 1
        for val in self.val:
            neighbors = self.neighbors(val)
            for neighbor in neighbors:
                self.disjoint_set.union(node, neighbor)
            node += 1
        return len(self.disjoint_set)
</code></pre>

<h2 id="toc_3">Reference</h2>

<ol>
<li><a href="https://rstudio-pubs-static.s3.amazonaws.com/72033_dcd43db591574873aac22be4cde29af6.html">Clustering on big graph, python</a></li>
<li><a href="https://en.wikipedia.org/wiki/Hamming_distance">Hamming Distance WIKIPEDIA</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bitwise Operation]]></title>
    <link href="http://larryim.cc/bitwise%20operator%20in%20python.html"/>
    <updated>2017-08-05T10:16:10+08:00</updated>
    <id>http://larryim.cc/bitwise%20operator%20in%20python.html</id>
    <content type="html"><![CDATA[
<ul>
<li>
<a href="#toc_0">The method of complements</a>
<ul>
<li>
<a href="#toc_1">One&#39;s complement (反码)</a>
</li>
<li>
<a href="#toc_2">Two&#39;s complement (补码)</a>
<ul>
<li>
<a href="#toc_3">Implementation</a>
</li>
</ul>
</li>
<li>
<a href="#toc_4">One or Two</a>
</li>
</ul>
</li>
<li>
<a href="#toc_5">Reference</a>
</li>
</ul>


<p>There are 6 <code>Bitwise Operators</code>(位操作符) in Python:</p>

<ul>
<li><code>x&lt;&lt;y</code>: Returns \(x\) with the bits shifted to the left by y places (and new bits on the right-hand-side are zeros). This is the same as multiplying x by \(2^y\).</li>
<li><code>x&gt;&gt;y</code>: Returns \(x\) with the bits shifted to the right by y places. This is the same as //&#39;ing \(x\) by \(2^y\).</li>
<li><code>x&amp;y</code>(bitwise AND): Each bit of the output is 1 if the corresponding bit of \(x\) AND of \(y\) is 1, otherwise it&#39;s 0.</li>
<li><code>x|y</code> (bitwise OR): Each bit of the output is 0 if the corresponding bit of \(x\) AND of \(y\) is 0, otherwise it&#39;s 1.</li>
<li><code>~ x</code> ( bitwise NOT, or complement): Returns the complement of \(x\) - the number you get by switching each 1 for a 0 and each 0 for a 1. This is the same as \(-x-1\).</li>
<li><code>^</code> (bitwise Exclusive OR): outputs true only when inputs differ (one is 1, the other is 0).</li>
</ul>

<p><code>Bitwise Operators</code> operate on numbers, but instead of treating that number as if it were a single value, they treat it as if it were a string of bits, written  in <code>two&#39;s-complement</code> binary.</p>

<h2 id="toc_0">The method of complements</h2>

<p>The <code>method of complements</code> is a technique used to subtract one number from another using only addition of positive numbers.</p>

<p>Many early computers, use <code>one&#39;s complement</code> notation. The IBM 700/7000 series used to use <code>sign/magnitude</code> notation. Almost all subsequent minicomputers and microcomputers use <code>two&#39;s complement</code>  in the computer industry.</p>

<h3 id="toc_1">One&#39;s complement (反码)</h3>

<p>The one&#39;s complement of a <code>binary number</code> is defined as the value obtained by inverting all the bits in the binary representation of the number (swapping 0s for 1s and vice versa). </p>

<p>Positive numbers are the same simple, binary system used by <code>two&#39;s complement</code> and <code>sign-magnitude</code>. Negative values are the bit complement of the corresponding positive value. </p>

<p>The table below shows all possible values in a 4-bit system, from −7 to +7.</p>

<pre><code>      +      −
 0   0000   1111   — Note that both +0 and −0 return TRUE when tested for zero
 1   0001   1110   — and FALSE when tested for non-zero. 
 2   0010   1101
 3   0011   1100
 4   0100   1011
 5   0101   1010
 6   0110   1001
 7   0111   1000
</code></pre>

<p><strong>Negative zero</strong> is the condition where all bits in a signed word are 1. </p>

<pre><code>1111 1111
</code></pre>

<h3 id="toc_2">Two&#39;s complement (补码)</h3>

<p>A <code>two&#39;s complement</code> number system encodes positive and negative numbers in a binary number representation. The weight of each bit is a power of two, except for the <code>most significant bit</code>(最高有效位), whose weight is the negative of corresponding power of two.</p>

<p>The method to convert a negative integer into a two&#39;s complement is implemented as follows:</p>

<pre><code>eg. -3
Start with positive 0000 0011
flip bits 1111 1100
add one 1111 1101
</code></pre>

<h4 id="toc_3">Implementation</h4>

<p>The naive implementation of <code>Two&#39;s complement</code> in Python is as follows:</p>

<pre><code class="language-python">def int_to_two_complement(val, num_bits):

    if val &lt; 0:
        # major procedure as follows:
        # 1. take the absolute
        # 2. flip
        # 3. add one

        # absolute of val: use int to transform str to int
        val = bin(val)[3:].rjust(num_bits, &#39;0&#39;)

        # flip it: bitwise complement
        flip_val = &#39;&#39;
        flip_bit = {&#39;0&#39;: &#39;1&#39;, &#39;1&#39;: &#39;0&#39;}
        for bit in val:
            flip_val += flip_bit[bit]
        val = flip_val

        # add one
        val = list(val)
        if val[-1] == &#39;0&#39;:
            val[-1] = &#39;1&#39;
        else:
            index = -1
            while val[index] == &#39;1&#39;:
                index -= 1
            val[-1] = &#39;0&#39;
            val[index - 1] = &#39;1&#39;
        val = &#39;&#39;.join(val)
        val = int(val)

    else:

        # fill zeros before the binary number converted by bin, the result = bin(val)
        val = bin(val)[2:].rjust(num_bits, &#39;0&#39;)
    return val
</code></pre>

<h3 id="toc_4">One or Two</h3>

<p>A <code>two&#39;s complement</code> integer equals its <code>one&#39;s complement</code> integer plus one.</p>

<p>\[X_{two} = 2^n-x = x_{one}+1\]</p>

<h2 id="toc_5">Reference</h2>

<p>1.<a href="https://en.wikipedia.org/wiki/Most_significant_bit">Most Significant Bit</a><br/>
2.<a href="https://wiki.python.org/moin/BitwiseOperators">wiki-python</a><br/>
3.<a href="https://stackoverflow.com/questions/1604464/twos-complement-in-python">two&#39;s complement in python -Stackoverflow</a><br/>
4. <a href="https://en.wikipedia.org/wiki/Two&#x27;s_complement#Subtraction_from_2N">Two&#39;s complement WIKIPEDIA</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Minimum Spanning Tree: Prim's, Kruskal's Algorithm and Clustering]]></title>
    <link href="http://larryim.cc/minimum_spanning_tree_prim_kruskal.html"/>
    <updated>2017-08-01T15:09:17+08:00</updated>
    <id>http://larryim.cc/minimum_spanning_tree_prim_kruskal.html</id>
    <content type="html"><![CDATA[
<ul>
<li>
<a href="#toc_0">Concepts</a>
</li>
<li>
<a href="#toc_1">Prim&#39;s algorithm</a>
<ul>
<li>
<a href="#toc_2">Implementation</a>
</li>
<li>
<a href="#toc_3">Prim&#39;s v.s. Dijkstra&#39;s</a>
</li>
</ul>
</li>
<li>
<a href="#toc_4">Kruskal&#39;s Algorithm</a>
<ul>
<li>
<a href="#toc_5">Implementation</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_6">Clustering</a>
<ul>
<li>
<a href="#toc_7">Implementation</a>
</li>
</ul>


<p>Let \(G=(V, E)\) be a connected, undirected graph with a real-valued weight function \(w\) defined on \(E\). If an acyclic subset \(T\in E\) that connects all of the vertices and whose total weight \(w(T)=\sum_{(u,v)\in T}w(u,v)\) is minimized, \(T\) forms a <code>Minimum Spanning Tree</code>.</p>

<h2 id="toc_0">Concepts</h2>

<ul>
<li><code>safe edge</code>: An edge that may be added to \(A\) without violating the invariant that \(A\) is a subset of some <code>minimum spanning tree</code>.</li>
<li><code>cut</code>: A <code>cut</code> \((S, V-S)\) of an undirected graph \(G=(V,E)\) is a partition of \(V\).</li>
<li><code>cross</code>: We say that an edge \((u,v)\in E\) <code>crosses</code> the cut \((S,V-S)\) if one of its endpoints is in \(S\) and the other is in \(V-S\).</li>
<li><code>respect</code>: If no edge in \(A\) (a subset of some <code>minimum spanning tree</code>) <code>crosses</code> the cut, the cut <code>respects</code> a set \(A\) of edges.</li>
<li><code>light edge</code>: An edge is a <code>light edge</code> crossing a cut if its weight is the minimum of any edge crossing the cut. </li>
</ul>

<h2 id="toc_1">Prim&#39;s algorithm</h2>

<p>In <code>Prim&#39;s algorithm</code>, each step adds a light edge to minimum spanning tree. The running time of the Prim&#39;s algorithm is \(O(E \log(V))\)</p>

<h3 id="toc_2">Implementation</h3>

<pre><code class="language-python">def prim(agraph, start):
    &quot;&quot;&quot;
    Prim&#39;s algorithm for minimum spanning tree
    Using min-heap data structure

    return a minimum spanning tree
    &quot;&quot;&quot;
    # vertex of minimun spanning tree
    mst_vertex = []
    pq = PriorityQueue()
    for v in agraph:
        v.setDistance(sys.maxsize)
        v.setPred(None)
    start.setDistance(0)
    pq.buildHeap([(v.getDistance(), v) for v in agraph])
    while not pq.isEmpty():
        u = pq.delMin()
        mst_vertex.append(u)
        for adjacent in u.getConnections():
            newcost = u.getWeight(adjacent)
            if adjacent in pq and newcost &lt; adjacent.getDistance():
                adjacent.setPred(u)
                adjacent.setDistance(newcost)
                pq.decreaseKey(adjacent, newcost)

    # edges of minimum spanning tree
    mst = []
    for i in range(1, len(mst_vertex)):
        # u, v, cost
        mst.append((mst_vertex[i-1], mst_vertex[i],  mst_vertex[i].getDistance()))

    return mst
</code></pre>

<h3 id="toc_3">Prim&#39;s v.s. Dijkstra&#39;s</h3>

<p><code>Prim&#39;s algorithm</code> are similar to <code>Dijkstra&#39;s algorithm</code>, both of which use a <code>priority queue</code>. And  each of them belongs to <code>greedy algorithm</code>. There is trivial difference when implementing:</p>

<p>\[\text{Prim&#39;s} p(v) = \min_{(u,v): u\in S} w(u,v)\]<br/>
\[\text{Dijkstra&#39;s} s(v) = \min_{(u,v): u\in S} \text{dist(su,u)} w(u,v)\]</p>

<h2 id="toc_4">Kruskal&#39;s Algorithm</h2>

<p>In <code>Kruskal&#39;s algorithm</code>, always add edges in increasing weight, skipping those whose addition would create a cycle.</p>

<p>In order to keep track of the connected components of a minimum spanning tree when implementing Kruskal&#39;s algorithm, a disjoint-set data structure should be used. The pseudo code for <code>MST-KRUSKAL</code>:</p>

<pre><code class="language-python">mst = []
for each vertex in G:
    make-set(vertex)
sort the edges of G into nondecreasing order by weight of edges
for each edge (u,v) in G:
    if find-set(u) != find_set(v):
        mst = mst + (u,v)
        union(u,v)
return mst
</code></pre>

<p>If we use <code>union-by-rank</code> and <code>path-compression</code> heuristics in <code>disjoint-set</code> data structure, the running time of <code>Kruskal&#39;s algorithm</code> is \(O(E\lg V)\).</p>

<h3 id="toc_5">Implementation</h3>

<pre><code class="language-python">def kruskal_mst(agraph):
    &quot;&quot;&quot;
    Return a minimum spanning tree using kruskal&#39;s algorithm
    &quot;&quot;&quot;
    # minimum spanning tree
    mst = []

    # disjoint set
    disjoint_set = DisjointSet()

    # make set
    for vertex in agraph.Vertices():
        disjoint_set.make_set(vertex)

    # edges of the graph
    edges = agraph.edges()
    edges.sort(key=lambda tup: tup[2])

    for u, v, cost in edges:
        if disjoint_set.find_set(u) != disjoint_set.find_set(v):
            mst.append((u, v, cost))
            disjoint_set.union(u, v)
    return mst
</code></pre>

<h1 id="toc_6">Clustering</h1>

<p><strong>Max-Spacing k clustering</strong>: Given a set of objects \(p_1, . . . , p_n\), a distance function \(d(p_i,p_j)\) specifies their similarity.  \(d(p_i,p_j)\) may be an actual distance, or some abstract representation of how dissimilar of two things are. </p>

<p><strong>OUR GOAL</strong>: Divide the \(n\) items up into \(k\) groups so that the minimum distance between items in different groups is maximized.</p>

<p><strong>IDEA</strong>: </p>

<ul>
<li>we maintain clusters as a set of connected components of a graph. </li>
<li>And Iteratively combine the clusters containing the two closest items by adding an edge between them.</li>
<li>Stop when there are \(k\) clusters.</li>
</ul>

<p>You&#39;ll find this is exactly <code>Kruskal&#39;s algorithm</code>.</p>

<h3 id="toc_7">Implementation</h3>

<pre><code class="language-python">def clustering(agraph, k):
    &quot;&quot;&quot;
    Max-Spacing k clustering

    Return maximum spacing of a k-clustering
    and corresponding mst.
    &quot;&quot;&quot;
    # minimum spanning tree
    mst = []

    # disjoint set
    disjoint_set = DisjointSet()

    # make set
    for vertex in agraph.Vertices():
        disjoint_set.make_set(vertex)

    # edges of the graph
    edges = agraph.edges()
    edges.sort(key=lambda tup: tup[2])

    for u, v, cost in edges:
        if len(disjoint_set) &gt;= k:

            if disjoint_set.find_set(u) != disjoint_set.find_set(v):
                mst.append((u, v, cost))
                max_cost = cost
                disjoint_set.union(u, v)
        else:
            break


    return max_cost, mst
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hash Table (5): Hashable]]></title>
    <link href="http://larryim.cc/hash_table_5_hashable.html"/>
    <updated>2017-08-03T17:06:19+08:00</updated>
    <id>http://larryim.cc/hash_table_5_hashable.html</id>
    <content type="html"><![CDATA[
<p>To make items hashable, you should implement <code>__hash__</code>. You should also implement <code>__eq__</code> in a compatible way -- items that are equivalent should hash the same.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Disjoint-Set Data Structure]]></title>
    <link href="http://larryim.cc/disjoint_set_data_structure.html"/>
    <updated>2017-08-03T15:59:13+08:00</updated>
    <id>http://larryim.cc/disjoint_set_data_structure.html</id>
    <content type="html"><![CDATA[
<ul>
<li>
<a href="#toc_0">Linked-List Implementation</a>
</li>
<li>
<a href="#toc_1">Forest Implementation of Disjoint-Set</a>
</li>
<li>
<a href="#toc_2">Reference</a>
</li>
</ul>


<p>In order to keep track of the connected components of a minimum spanning tree when implementing <code>Kruskal&#39;s algorithm</code>, a disjoint-set data structure should be used.</p>

<p><code>Disjoint-set</code> data structure, also called <code>union-find</code> data structure, is a data structure that keeps track of a set of elements partitioned into a number of disjoint subsets.</p>

<p>A <code>disjoint-set</code> data structure supports following operations:</p>

<ul>
<li><code>MAKE-SET(x)</code> creates a new set whose only member is \(x\)</li>
<li><code>UNION(x,y)</code> unites the dynamic sets that contains \(x\) and \(y\), into a new set that is the union of these two sets.</li>
<li><code>FIND-SET(x)</code> returns the representative of the set containing \(x\).</li>
</ul>

<h2 id="toc_0">Linked-List Implementation</h2>

<p>Each set is represented by its own <strong>linked list</strong>. The object for each set has attributes <em>head</em>, pointing to the first object in the list, and <em>tail</em>, pointing to the last object. Each object in the linked list contains a set member, a pointer to the next object in the list, and a pointer back to the set object.</p>

<p><img src="media/15017471539381/Screen%20Shot%202017-08-03%20at%209.21.43%20PM.png" alt="Linked List implementaion"/></p>

<p><strong>Weighted-Union Heuristic</strong>: And each linked list also includes the length of the list and we always append the shorter list onto the longer.</p>

<p>Using the linked-list representation of disjoint sets and the weighted-union heuristic, a sequence of \(m\) MAKE-SET, UNION, and FIND-SET, \(n\) of which are MAKE-SET operations, takes \(O(m+n\lg n)\) time.</p>

<pre><code class="language-python">class Node:
    &quot;&quot;&quot;
    class Node for double liked list
    &quot;&quot;&quot;
    def __init__(self, elem):
        self.prev = None
        self.elem = elem
        self.next = None

    def __hash__(self):
        return hash(self.elem)

    def __eq__(self, x, y):
        return x.elem == y.elem


class LinkedList:

    def __init__(self):
        self.head = None
        self.tail = None
        self.length = 0

    def add(self, node):
        &quot;&quot;&quot;
        add element to disjoint set
        &quot;&quot;&quot;
        if self.head:
            node.prev = self
            self.tail.next = node
            self.tail = node
        else:
            self.head = node
            self.tail = node
            node.prev = self
        self.length += 1

    def __len__(self):
        return self.length

    def set_length(self, l):
        self.length = l

    def __iter__(self):
        next_node = self.head
        while next_node:
            yield next_node
            next_node = next_node.next


            

class DisjointSet:

    def __init__(self):
        self.sets = []

    def make_set(self, node):
        &quot;&quot;&quot; 
        creates a new set whose only member (and thus representative) is x.
        &quot;&quot;&quot;
        alist = LinkedList()
        alist.add(node)
        self.sets.append(alist)
        return alist

    def union(self, nodex, nodey):
        &quot;&quot;&quot;
        unites the dynamic sets that contain x and y, into a new set that is the union of these two sets.
        &quot;&quot;&quot;
        listx = self.find_set(nodex)
        listy = self.find_set(nodey)
        
        # append the shorter list onto the longer.
        if len(listx) &gt; len(listy):
            listx.tail.next = listy.head
            for y in listy:
                y.prev = listx
            listx.tail = listy.tail
            listx.set_length = len(listx) + len(listy)
            self.sets.remove(listy)
        else:
            listy.tail.next = listx.head
            for x in listx:
                x.prev = listy
            listy.tail = listx.tail
            listy.setlength = len(listx) + len(listy)
            self.sets.remove(listx)



    def find_set(self, node):
        &quot;&quot;&quot;
        returns the representative of the set containing x
        &quot;&quot;&quot;
        return node.prev

    def connected_components(self):
        for link_list in self.sets:
            print(&#39;( &#39;, end=&#39;&#39;)
            for node in link_list:
                print(node.elem, end=&#39; &#39;)
            print(&#39;) &#39;, end=&#39;&#39;)

    def __len__(self):
        return len(self.sets)

</code></pre>

<h2 id="toc_1">Forest Implementation of Disjoint-Set</h2>

<p><code>Disjoint-set forest</code>, a faster implementation of disjoint sets, uses rooted trees represent sets, with each node containing one member and each tree representing one set. In a <code>disjoint-set forest</code>, each member points only to its parents. The root of each tree contains the representative and is its own parent.</p>

<p><img src="media/15017471539381/15017663990040.png" alt="disjoint set forest"/></p>

<p><strong>Union by Rank</strong>: For each node, we maintain a <code>rank</code>, which is an upper bound on the hight of the node. We make the root with smaller rank point to the root with larger rank during a <code>Union</code> operation.</p>

<p><strong>Path Compression</strong>: When we call <code>find_set</code>, we traverse the path from a node up to its root. Instead of just returning root, we will link all the nodes in this path directly to root. </p>

<p><img src="media/15017471539381/15017663772888.png" alt="path compression"/></p>

<pre><code class="language-python">class DisjointSet:
    &quot;&quot;&quot;
    Disjoint set data structure
    &quot;&quot;&quot;

    def __init__(self):
        self.sets = []
        self.parent = {}
        self.rank = {}

    def make_set(self, node):
        &quot;&quot;&quot;
        creates a new set whose only member (and thus representative) is x.
        &quot;&quot;&quot;
        self.parent[node] = node
        self.sets.append(node)
        self.rank[node] = 0

    def union(self, x, y):
        &quot;&quot;&quot;
        unites the dynamic sets that contain x and y, into a new set that is the union of these two sets.
        &quot;&quot;&quot;
        x_root = self.find_set(x)
        y_root = self.find_set(y)
        if x_root == y_root:
            return

        if self.rank[x_root] &gt; self.rank[y_root]:
            self.parent[y_root] = x_root
        else:
            self.parent[x_root] = y_root
            if self.rank[x_root] == self.rank[y_root]:
                self.rank[y_root] = self.rank[y_root] + 1

    def find_set(self, x):
        &quot;&quot;&quot;
        returns the representative of the set containing x
        &quot;&quot;&quot;
        if self.parent[x] != x:
            self.parent[x] = self.find_set(self.parent[x])
        return self.parent[x]

</code></pre>

<h2 id="toc_2">Reference</h2>

<ol>
<li>Cormen, Leiserson, Rivest, and Stein. 2009. Introduction to Algorithms (3rd edition)</li>
<li><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-design-and-analysis-of-algorithms-spring-2012/lecture-notes/MIT6_046JS12_lec16.pdf">Disjoint-set Data Structure MIT</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Character encoding]]></title>
    <link href="http://larryim.cc/character%20encoding.html"/>
    <updated>2017-08-03T12:03:47+08:00</updated>
    <id>http://larryim.cc/character%20encoding.html</id>
    <content type="html"><![CDATA[
<p>A <code>character encoding</code> (字符编码) is used to represent a repertoire of characters by some kind of encoding system.</p>

<h2 id="toc_0">Terminology</h2>

<ul>
<li><code>character</code>: a minimal unit of text that has semantic value.</li>
<li><code>character set</code>: a collection of characters that might be used by multiple languages.</li>
<li><code>coded character set</code>: a character set in which each character corresponds to a unique number.</li>
<li><code>code unit</code>: a bit sequence used to encode each character of a repertoire within a given encoding form.</li>
<li><code>code point</code>(码位): any legal value in the character set.</li>
<li><code>character repertoire</code>(字符集): an abstract list of more than one million characters found in a wide variety of scripts including <em>Latin</em>, <em>Cyrillic</em>, <em>Chinese</em>, <em>Korean</em>, <em>Japanese</em>, <em>Hebrew</em>, and <em>Aramaic</em>.</li>
</ul>

<h2 id="toc_1">Unicode</h2>

<p><code>unicode</code> is a computing industry standard for the consistent encoding, representation, and handling of text expressed in most of the world&#39;s writing systems. The Unicode standard defines <code>UTF-8</code>, <code>UTF-16</code>, and <code>UTF-32</code>, and several other encodings are in use.</p>

<h3 id="toc_2">UTF-8</h3>

<p><code>UTF-8</code>, the most widely used by websites. The encoding is variable-length and uses 8-bit code units. UTF-8 encodes each of the 1,112,064 valid code points in Unicode using 1 to 4 8 bit bytes.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MySQL(1): Introduction]]></title>
    <link href="http://larryim.cc/mysql_introduction.html"/>
    <updated>2017-08-02T10:26:19+08:00</updated>
    <id>http://larryim.cc/mysql_introduction.html</id>
    <content type="html"><![CDATA[
<ul>
<li>
<a href="#toc_0">client and server</a>
</li>
<li>
<a href="#toc_1">basic command</a>
</li>
<li>
<a href="#toc_2">GUI</a>
</li>
<li>
<a href="#toc_3">auto-completion and syntax highlighting</a>
</li>
<li>
<a href="#toc_4">Starting to Explore Databases</a>
</li>
</ul>
</li>
<li>
<a href="#toc_5">Reference</a>


<p>MySQL is an open source, multithread, relational database management system.</p>

<h2 id="toc_0">client and server</h2>

<p>The <code>server</code> maintains, controls and protects your data, storing it in files on the computer where the server is running in various formats. It listens for requests from <code>client</code>.</p>

<p>For MySQL, <code>mysqld</code>(the <em>d</em> stands for <em>daemon</em>) is the server. <code>mysql</code> is a standard MySQL client. With its text-based interface, a user can log in and execute SQL queries.</p>

<h2 id="toc_1">basic command</h2>

<ul>
<li>The <code>mysql_safe</code> script is the most common way to start <code>mysqld</code>, because this script can restart the daemon if it crashes.</li>
<li>The <code>mysqlaccess</code> tool creates user accounts and sets their privileges.</li>
<li>The<code>mysqladmin</code> utility can be used to manage the database server itself from the command-line. </li>
<li>The <code>mysqlshow</code> tool may be used to examine a server’s status, as well as information about databases and tables.</li>
<li>The <code>mysqldump</code> utility is the most popular one for exporting data and table structures to a plain-text file, known as a <code>dump</code> file. </li>
<li>The command <code>mysql -u root -p</code> is usually used to start the client <code>mysql</code>, after which the passport should be filled.</li>
<li>The command <code>mysql -u root -p -e &quot;SELECT User,Host FROM mysql.user;&quot;</code> gives a list of username and host combination on the server.</li>
</ul>

<h2 id="toc_2">GUI</h2>

<p><a href="https://sequelpro.com">Sequel Pro</a> is a fast, easy-to-use Mac database management application for working with MySQL databases. see <a href="https://segmentfault.com/a/1190000006255923">detail in Chinese</a></p>

<p><a href="https://www.mysql.com/products/workbench">WorkBench</a> provides data modeling, SQL development, and comprehensive administration tools for server configuration, user administration, backup, and much more.</p>

<p>Although GUIs are easy-to-use, in the long run they&#39;re not useful. The text-based <code>mysql</code> client causes you to think and remember more, and it&#39;s not that difficult to use or confusing. And the command-line method of using <code>mysql</code> allows you to interact with the server without much overhead.</p>

<p>``</p>

<h2 id="toc_3">auto-completion and syntax highlighting</h2>

<p><a href="http://www.mycli.net">Mycli</a> is a command-line interface which support MariaDB, MySQL with auto-completion and syntax highlighting.</p>

<p><img src="media/15016407791054/15025066875709.gif" alt=""/></p>

<h2 id="toc_4">Starting to Explore Databases</h2>

<p>For each of SQL statements, we heave to specify the database name. If you will be working mainly in one database, you can set the default database so that you don&#39;t have to specify the database each time:</p>

<pre><code class="language-SQL">USE database_name
</code></pre>

<h1 id="toc_5">Reference</h1>

<ol>
<li>Russell T D. 2015. Learning MySQL and MariaDB. O&#39;REILLY.</li>
</ol>

]]></content>
  </entry>
  
</feed>
