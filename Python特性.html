<!doctype html>
<html class="no-js" lang="en">
<script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?fdc936c9f5a3b72177541183cdeb8cb3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Python特性 - techlarry
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="techlarry" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:larryim.cc ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="about.html">About</a></li>
        
        <li id=""><a target="_self" href="category.html">Category</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; techlarry</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="Python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95.html">Python数据结构与算法</a></li>
        
            <li><a href="Python%E7%89%B9%E6%80%A7.html">Python特性</a></li>
        
            <li><a href="%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0.html">机器学习</a></li>
        
            <li><a href="Python%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E4%B8%89%E7%BB%B4%E5%8F%AF%E8%A7%86%E5%8C%96.html">Python科学计算三维可视化</a></li>
        
            <li><a href="English.html">English</a></li>
        
            <li><a href="%20%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA.html"> 理解计算机</a></li>
        
            <li><a href="Linux%20%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B.html">Linux 系统编程</a></li>
        
            <li><a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html">数据库</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="bitwise%20operator%20in%20python.html">
                
                  <h1>Bitwise Operation</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ul>
<li>
<a href="#toc_0">The method of complements</a>
<ul>
<li>
<a href="#toc_1">One&#39;s complement (反码)</a>
</li>
<li>
<a href="#toc_2">Two&#39;s complement (补码)</a>
<ul>
<li>
<a href="#toc_3">Implementation</a>
</li>
</ul>
</li>
<li>
<a href="#toc_4">One or Two</a>
</li>
</ul>
</li>
<li>
<a href="#toc_5">Reference</a>
</li>
</ul>


<p>There are 6 <code>Bitwise Operators</code>(位操作符) in Python:</p>

<ul>
<li><code>x&lt;&lt;y</code>: Returns \(x\) with the bits shifted to the left by y places (and new bits on the right-hand-side are zeros). This is the same as multiplying x by \(2^y\).</li>
<li><code>x&gt;&gt;y</code>: Returns \(x\) with the bits shifted to the right by y places. This is the same as //&#39;ing \(x\) by \(2^y\).</li>
<li><code>x&amp;y</code>(bitwise AND): Each bit of the output is 1 if the corresponding bit of \(x\) AND of \(y\) is 1, otherwise it&#39;s 0.</li>
<li><code>x|y</code> (bitwise OR): Each bit of the output is 0 if the corresponding bit of \(x\) AND of \(y\) is 0, otherwise it&#39;s 1.</li>
<li><code>~ x</code> ( bitwise NOT, or complement): Returns the complement of \(x\) - the number you get by switching each 1 for a 0 and each 0 for a 1. This is the same as \(-x-1\).</li>
<li><code>^</code> (bitwise Exclusive OR): outputs true only when inputs differ (one is 1, the other is 0).</li>
</ul>

<p><code>Bitwise Operators</code> operate on numbers, but instead of treating that number as if it were a single value, they treat it as if it were a string of bits, written  in <code>two&#39;s-complement</code> binary.</p>

<h2 id="toc_0">The method of complements</h2>

<p>The <code>method of complements</code> is a technique used to subtract one number from another using only addition of positive numbers.</p>

<p>Many early computers, use <code>one&#39;s complement</code> notation. The IBM 700/7000 series used to use <code>sign/magnitude</code> notation. Almost all subsequent minicomputers and microcomputers use <code>two&#39;s complement</code>  in the computer industry.</p>

<h3 id="toc_1">One&#39;s complement (反码)</h3>

<p>The one&#39;s complement of a <code>binary number</code> is defined as the value obtained by inverting all the bits in the binary representation of the number (swapping 0s for 1s and vice versa). </p>

<p>Positive numbers are the same simple, binary system used by <code>two&#39;s complement</code> and <code>sign-magnitude</code>. Negative values are the bit complement of the corresponding positive value. </p>

<p>The table below shows all possible values in a 4-bit system, from −7 to +7.</p>

<pre><code>      +      −
 0   0000   1111   — Note that both +0 and −0 return TRUE when tested for zero
 1   0001   1110   — and FALSE when tested for non-zero. 
 2   0010   1101
 3   0011   1100
 4   0100   1011
 5   0101   1010
 6   0110   1001
 7   0111   1000
</code></pre>

<p><strong>Negative zero</strong> is the condition where all bits in a signed word are 1. </p>

<pre><code>1111 1111
</code></pre>

<h3 id="toc_2">Two&#39;s complement (补码)</h3>

<p>A <code>two&#39;s complement</code> number system encodes positive and negative numbers in a binary number representation. The weight of each bit is a power of two, except for the <code>most significant bit</code>(最高有效位), whose weight is the negative of corresponding power of two.</p>

<p>The method to convert a negative integer into a two&#39;s complement is implemented as follows:</p>

<pre><code>eg. -3
Start with positive 0000 0011
flip bits 1111 1100
add one 1111 1101
</code></pre>

<h4 id="toc_3">Implementation</h4>

<p>The naive implementation of <code>Two&#39;s complement</code> in Python is as follows:</p>

<pre><code class="language-python">def int_to_two_complement(val, num_bits):

    if val &lt; 0:
        # major procedure as follows:
        # 1. take the absolute
        # 2. flip
        # 3. add one

        # absolute of val: use int to transform str to int
        val = bin(val)[3:].rjust(num_bits, &#39;0&#39;)

        # flip it: bitwise complement
        flip_val = &#39;&#39;
        flip_bit = {&#39;0&#39;: &#39;1&#39;, &#39;1&#39;: &#39;0&#39;}
        for bit in val:
            flip_val += flip_bit[bit]
        val = flip_val

        # add one
        val = list(val)
        if val[-1] == &#39;0&#39;:
            val[-1] = &#39;1&#39;
        else:
            index = -1
            while val[index] == &#39;1&#39;:
                index -= 1
            val[-1] = &#39;0&#39;
            val[index - 1] = &#39;1&#39;
        val = &#39;&#39;.join(val)
        val = int(val)

    else:

        # fill zeros before the binary number converted by bin, the result = bin(val)
        val = bin(val)[2:].rjust(num_bits, &#39;0&#39;)
    return val
</code></pre>

<h3 id="toc_4">One or Two</h3>

<p>A <code>two&#39;s complement</code> integer equals its <code>one&#39;s complement</code> integer plus one.</p>

<p>\[X_{two} = 2^n-x = x_{one}+1\]</p>

<h2 id="toc_5">Reference</h2>

<p>1.<a href="https://en.wikipedia.org/wiki/Most_significant_bit">Most Significant Bit</a><br/>
2.<a href="https://wiki.python.org/moin/BitwiseOperators">wiki-python</a><br/>
3.<a href="https://stackoverflow.com/questions/1604464/twos-complement-in-python">two&#39;s complement in python -Stackoverflow</a><br/>
4. <a href="https://en.wikipedia.org/wiki/Two&#x27;s_complement#Subtraction_from_2N">Two&#39;s complement WIKIPEDIA</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/8/5</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="python_generator.html">
                
                  <h1>Generator</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Any function that contains a <code>yield</code> statement is called a <code>generator</code>.</p>

<h3 id="toc_0">yield statement</h3>

<p>Each time a value is yielded (with <code>yield</code>), the function freezes; that is, it stops its execution at exactly that point and waits to be reawakened.</p>

<h3 id="toc_1">generator comprehension</h3>

<p><code>Generator comprehension</code> works in the same way as <code>list comprehension</code>, except that a list isn&#39;t constructed. Instead, a <code>generator</code> is returned.</p>

<pre><code class="language-python">&gt;&gt;&gt; h = (i for i in range(10))
&gt;&gt;&gt; h
&lt;generator object &lt;genexpr&gt; at 0x104d76ba0&gt;
&gt;&gt;&gt; list(h)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre>

<p>When using <code>generator comprehension</code>, if there already exists parentheses, you don&#39;t need to add another pair.</p>

<pre><code class="language-python">&gt;&gt;&gt; sorted(100-i for i in range(10))
[91, 92, 93, 94, 95, 96, 97, 98, 99, 100]
</code></pre>

<h3 id="toc_2">Recursive generator</h3>

<p><code>generators</code> are ideal for complex recursive algorithms that gradually build a result. </p>

<p>A <code>recursive generator</code> could be used to flatten a nested list.</p>

<pre><code class="language-python">def flatten(nested):
    &quot;&quot;&quot;
    When flatten is called, you have two possibilites: the base case and the recursive case.

    In the base case, the function is told to flatten a single element.
    In the recursive case, flatten it.

    &gt;&gt;&gt; list(flatten([[[1], 2], 3, 4, [5, [6, 7]], 8]))
    [1, 2, 3, 4, 5, 6, 7, 8]
    &gt;&gt;&gt; list(flatten([&#39;foo&#39;, [&#39;bar&#39;, [&#39;baz&#39;]]]))
    [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]
    &quot;&quot;&quot;
    try:
        try:
            nested + &#39; &#39;
        except TypeError:
            pass
        else:
            raise TypeError
        
        for sublist in nested:
            for element in flatten(sublist):
                yield element

    except TypeError:
        yield nested


if __name__ == &quot;__main__&quot;:
    import doctest
    doctest.testmod(verbose=True)
</code></pre>

<p>An <code>inorder traversal</code> (also <code>postoder traversal</code> and <code>preorder traversal</code>) of a <code>binary search tree</code> might use the <code>recursive generator</code>, detailed code here <a href="http://larryim.cc/binary_search_tree.html">Binary Search Tree</a></p>

<h3 id="toc_3">Generator methods</h3>

<p>We may supply generators with values after they have started running, by using a communications channel between the <code>generator</code> and the “outside world,” with the following two end points:</p>

<ul>
<li><p>The outside world has access to a method on the generator called <code>send</code>, which works just like <code>next</code>, except that it takes a single argument (the “message” to send—an arbitrary object).</p></li>
<li><p>Inside the suspended generator, <strong><code>yield</code> may now be used as an <code>expression</code>, rather than a <code>statement</code></strong>. In other words, when the generator is resumed, yield returns a value—the value sent from the outside through <code>send</code>. If <code>next</code> was used, <code>yield</code> returns <code>None</code>.</p></li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/23</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="python_iterator.html">
                
                  <h1>Iterators</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>An object that implements the <code>__iter__</code> method is <code>iterable</code>, and the object implementing <code>next</code> is the <code>iterator</code>.</p>

<p>Why Iterator?<br/>
<strong>not overkill, and more general, simpler, elegant</strong></p>

<p>It is recommended that iterators implement an <code>__iter__</code>method of their own in addition (returning self), so they themselves can be used directly in <code>for</code> loops.</p>

<p>Here an example of Fibonacci numbers.</p>

<pre><code class="language-python">
class Fibs:
    &quot;&quot;&quot;
    Fibonacci numbers
    &quot;&quot;&quot;

    def __init__(self):
        self.a = 0
        self.b = 1

    def __next__(self):
        self.a, self.b = self.b, self.a + self.b
        if self.a &gt; 1000:
            raise StopIteration
        return self.a

    def __iter__(self):
        return self

if __name__ == &quot;__main__&quot;:
    fibs = Fibs()
    for f in fibs:
        print(f)
</code></pre>

<h3 id="toc_0">iterable to iterator</h3>

<p>The built-in function <code>iter</code> can be used to get an iterator from an <code>iterable</code> object.</p>

<pre><code class="language-python">&gt;&gt;&gt; iterable = [1,2,3]
&gt;&gt;&gt; iterator = iter(iterable)
&gt;&gt;&gt; next(iterator)
1
</code></pre>

<h3 id="toc_1">iterator to sequence</h3>

<p>Using the <code>list</code> constructor, an iterator can be easily converted to a sequence.</p>

<hr/>

<pre><code class="language-python">&gt;&gt;&gt; h = Fibs
&gt;&gt;&gt; h = Fibs()
&gt;&gt;&gt; list(h)
[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987]
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/23</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="magic_method_item_access.html">
                
                  <h1>Magic Methods: Item Access</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Useful magic methods allows you to create objects that behave like sequences or mappings.</p>

<h2 id="toc_0">Sequence and Mapping Protocol</h2>

<p><code>protocol</code> in Python usually describe the rules governing some form of behavior. The <code>protocol</code> states which methods you should implement and what those methods should do. So, to be a sequence means,  to follow the sequence protocol.</p>

<ul>
<li><code>__len__(self)</code>: This method should return the number of items contained in the collection. For a sequence, this would simply be the number of elements. For a mapping, it would be the number of key-value pairs. If <code>__len__</code> returns zero (and you don’t implement <code>__nonzero__</code>, which overrides this behavior), the object is treated as false in a Boolean context (as with empty lists, tuples, strings, and dictionaries).</li>
<li><code>__getitem__(self, key)</code>: This should return the value corresponding to the given key. For a sequence, the key should be an integer from \(0\) to \(n–1\) (or, it could be negative, as noted later), where \(n\) is the length of the sequence. For a mapping, you could really have any kind of keys.</li>
<li><code>__setitem__(self, key, value)</code>: This should store value in a manner associated with key, so it can later be retrieved with <code>__getitem__</code>. Of course, you define this method only for mutable objects.</li>
<li><code>__delitem__(self, key)</code>: This is called when someone uses the <code>del</code> statement on a part of the object, and should delete the element associated with key. Again, only mutable objects (and not all of them—only those for which you want to let items be removed) should define this method.</li>
</ul>

<h2 id="toc_1">Example</h2>

<pre><code class="language-python">def checkIndex(key):
    &quot;&quot;&quot;
    Is the given key an acceptable index?
    To be acceptable, the key should be a non-negative integer. If it
    is not an integer, a TypeError is raised; if it is negative, an
    IndexError is raised (since the sequence is of infinite length).
    &quot;&quot;&quot;
    if not isinstance(key, int):
        raise TypeError
    if key &lt; 0:
        raise IndexError


class ArithmeticSequence:
    def __init__(self, start=0, step=1):
        &quot;&quot;&quot;
        Initialize the arithmetic sequence.
        start   - the first value in the sequence
        step    - the difference between two adjacent values
        changed - a dictionary of values that have been modified by the user
        &quot;&quot;&quot;
        self.start = start
        self.step = step
        self.changed = {}

    def __getitem__(self, key):
        &quot;&quot;&quot;
        Get an item from the arithmetic sequence.
        &quot;&quot;&quot;
        checkIndex(key)
        try:
            return self.changed[key]
        except KeyError:
            return self.start + key*self.step
    # Store the start value
    # Store the step value
    # No items have been modified
    # Modified?
    # otherwise...
    # ...calculate the value

    def __setitem__(self, key, value):
        &quot;&quot;&quot;
        Change an item in the arithmetic sequence.
        &quot;&quot;&quot;
        checkIndex(key)
        self.changed[key] = value                 # Store the changed value

    def __delitem__(self, key):
        &quot;&quot;&quot;
        Delete the key provided from sequence
        &quot;&quot;&quot;
        checkIndex(key)
        del self.changed[key]



if __name__ == &quot;__main__&quot;:
    s = ArithmeticSequence(1, 2)
    print(s[4])
    s[4]=3
    print(s[4])
    del s[4]
    print(s[4])
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/18</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="recursion_iteration.html">
                
                  <h1>Recursion Iteration Performace</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>The performance of <code>Recursion</code> v.s. <code>Iteration</code> depends on the language being used.</p>

<p>In Java, C, and Python, <code>recursion</code> is fairly expensive compared to <code>iteration</code> (in general) because it requires the allocation of a new <code>stack frame</code>. In some C compilers, one can use a compiler flag to eliminate this overhead, which transforms certain types of recursion (actually, certain types of tail calls) into jumps instead of function calls.</p>

<h2 id="toc_0">Stack Frame</h2>

<p>When a function is called in Python, a <code>stack frame</code> is allocated to handle the local variables of the function. When the function returns, the return value is left on the top of the stack for the calling function to access.</p>

<p>The stack frame provide a <code>scope</code> for the variables used by the function. Even though we are calling the same function over and over, each call creates a new scope for the variables that are local to the function.</p>

<h3 id="toc_1">Get Stack Frame</h3>

<p>The <code>inspect</code> module in <code>python</code> provides several useful functions to help get information about live objects such as modules, classes, methods, functions, tracebacks, <code>frame objects</code>, and code objects.</p>

<pre><code class="language-python">import inspect

def f1():
    names = []
    # inpect.currentframe
    # Return the frame object for the caller’s stack frame.
    frame = inspect.currentframe()
  
    ## Keep moving to next outer frame
    while True:
        try:
            frame = frame.f_back # next outer frame object (this frame’s caller)
            name = frame.f_code.co_name # name with which this code object was defined
            names.append(name)
        except:
            break
    return names
    
def f2():
   return f1()

def f3():
   return f2()

def f4():
   return f3()

print(f4())
</code></pre>

<p>The results shows:</p>

<pre><code class="language-python">[&#39;f2&#39;, &#39;f3&#39;, &#39;f4&#39;, &#39;&lt;module&gt;&#39;]
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/17</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="testing.html">
                
                  <h1>Testing</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><a href="https://en.wikipedia.org/wiki/Unit_testing">Unit testing</a> is a software testing method by which individual units of source code, sets of one or more computer program modules together with associated control data, usage procedures, and operating procedures, are tested to determine whether they are fit for use.</p>

<h2 id="toc_0">Test-driven programming</h2>

<p>&quot;<strong>Test first and code later</strong>&quot; practice, known as test-driven programming, instead of test after code.</p>

<h3 id="toc_1">Requirement Specification</h3>

<p>When developing a piece of software, you must first know what problem the software will solve—what objectives it will meet. You can clarify your goals for the program by writing a <strong>requirement specification</strong>, a document (or just some quick notes) describing requirements the program must satisfy. </p>

<h3 id="toc_2">The 1-2-3-4 of Testing</h3>

<p>Here’s a breakdown of the test-driven development process:</p>

<ul>
<li>Figure out the new feature you want. Possibly document it, and then write a test for it.</li>
<li>Write some skeleton code for the feature, so that you program runs without any syntax errors. See your test fail.</li>
<li>Write dummy code for skeleton code, just to appease the test.</li>
<li>Rewrite the code so that it actually pass the test.</li>
</ul>

<h2 id="toc_3">Testing Tools</h2>

<p>Two brilliant modules are available to automate the testing process:</p>

<ul>
<li><code>unittest</code>: A generic testing framework.</li>
<li><code>doctest</code>: A simpler module, designed for checking documentation, but excellent for writing unit tests as well.</li>
</ul>

<h3 id="toc_4">doctest</h3>

<p>The <code>testmod</code> function checks both the module docstring and function docstring.</p>

<p>E.g.</p>

<pre><code class="language-python">def square(x):
    &quot;&quot;&quot;
    squares a number and returns the result.
    &gt;&gt;&gt; square(2)
    4
    &gt;&gt;&gt; square(3)
    9
    &quot;&quot;&quot;
    return x*x

if __name__ == &quot;__main__&quot;:
    import doctest, doc_test_example
    doctest.testmod(doc_test_example, verbose=True)
</code></pre>

<p>Run the example. To get some more output, just add <code>-v</code>(for verbose)</p>

<pre><code class="language-bash">$ python doc_test_example.py -v
Trying:
    square(2)
Expecting:
    4
ok
Trying:
    square(3)
Expecting:
    9
ok
1 items had no tests:
    doc_test_example
1 items passed all tests:
   2 tests in doc_test_example.square
2 tests in 2 items.
2 passed and 0 failed.
Test passed.
</code></pre>

<h3 id="toc_5">unittest</h3>

<p><code>unittest</code> which is based on the popular test framework <code>JUnit</code>, is more flexible and powerful. It allows to write very large and thorough test sets in a more structured manner.</p>

<p><strong>注意： 测试方法应该以test为前缀命名</strong></p>

<p>E.g.</p>

<pre><code class="language-python">import unittest
import doc_test_example as my_math

class ProductTestCase(unittest.TestCase):

    def testIntegers(self):
        for x in xrange(-10,10):
            p = my_math.square(x)
            self.failUnless(p == x*x, &#39;Integer multiplication failed&#39;)

    def testFloats(self):
        for x in xrange(-10,10):
            x = x/10.0
            p = my_math.square(x)
            self.failUnless(p == x*x, &#39;Float multiplication failed&#39;)


if __name__ == &quot;__main__&quot;:
    unittest.main()
</code></pre>

<p>Another example to test <code>dijkstra&#39;s algorithm</code> see <a href="http://larryim.cc/dijkstra_algorithm.html">here</a></p>

<p>Methods such as <code>failUnless</code> check a condition to determine whether the given test succeeds or fails. </p>

<p>The <code>unittest</code> module distinguishes between <code>errors</code>, where an exception is raised, and <code>failures</code>, which result from calls to <code>failUnless</code> and the like. </p>

<h2 id="toc_6">Source Code Checking</h2>

<p><a href="https://www.pylint.org">Pylint</a> and PyChecker are good tools for checking Python source code, looking for mistakes.</p>

<p><code>Pylint</code> is a tool that checks for errors in Python code, tries to enforce a coding standard and looks for code smells. It can also look for certain type errors, it can recommend suggestions about how particular blocks can be refactored and can offer you details about the code’s complexity.</p>

<p><code>Pylint</code> can be integrated with <code>Pycharm</code>, see <a href="https://pylint.readthedocs.io/en/latest/user_guide/ide-integration.html#pylint-in-pycharm">detail</a>.</p>

<h3 id="toc_7">Resources</h3>

<ul>
<li><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-pylint/index.html">如何使用 Pylint 来规范 Python 代码风格</a></li>
<li><a href="https://www.python.org/dev/peps/pep-0008/">Style Guide for Python Code</a></li>
</ul>

<h2 id="toc_8">Profile</h2>

<p><strong>When in doubt, use brute force</strong></p>

<p>The standard library includes nice profiler modules called <code>profile</code> and <code>cProfile</code>.  </p>

<p>A <code>profile</code> is a set of statistics that describes how often and for how long various parts of the program executed. </p>

<pre><code class="language-python">&gt;&gt;&gt; import profile
&gt;&gt;&gt; from my_math import square
&gt;&gt;&gt; profile.run(&#39;square(1, 2)&#39;)
</code></pre>

<p>Another way to use <code>profile</code> in command-line:</p>

<pre><code class="language-bash">$ python -m profile prof1py
</code></pre>

<p>The standard library also contains a module called <code>timeit</code>, which is a simple way of timing small snippets of Python code.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/14</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="anaconda.html">
                
                  <h1>Anaconda</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><a href="https://www.continuum.io/why-anaconda">Anaconda </a>(/ˌænə&#39;kɑndə/)是一个用于科学计算的python发行版，支持各种系统，提供了包管理和环境管理的功能。Anaconda 利用<code>conda</code>来进行package和environment的管理。</p>

<h2 id="toc_0">Conda的包管理</h2>

<p><code>Conda</code>既是一个工具，也是一个可执行命令，其核心功能是包管理和环境管理。包管理与<code>pip</code>使用类似。</p>

<pre><code class="language-python"># 安装package
conda install package

# 查看已经安装的packages
conda list

# 查找package信息
conda search package

# 更新package
conda update -n python27 package

# 删除package
conda remove -n python27 package
</code></pre>

<h2 id="toc_1">Conda的环境管理</h2>

<pre><code class="language-bash"># 创建一个名为python27的环境，指定Python版本是2.7
conda create --name python27 python=2.7

# 安装好后，使用activate激活某个环境
source activate python27 # 激活后，会发现terminal输入的地方多了python27的字样，实际上，此时系统做的事情就是把默认环境从PATH中去除，再把2.7对应的命令加入PATH

# 如果想返回python 2.7环境，运行
source deactivate python27 # for Linux &amp; Mac

# 删除一个已有的环境
conda remove --name python27 --all
</code></pre>

<h2 id="toc_2">使用Pycharm</h2>

<p>在<code>Pycharm</code>配置里选用<code>Anaconda</code>的<code>python</code>编译器所在位置即可。</p>

<h2 id="toc_3">Resources</h2>

<p><a href="https://conda.io/docs/_downloads/conda-cheatsheet.pdf">Conda Cheat Sheet</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/7/13</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14973620419454.html">
                
                  <h1>魔法方法(一)：自定义序列</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Python中的魔法方法可以理解为对类中的内置方法的重载。</p>

<h2 id="toc_0">自定义序列</h2>

<p>有许多办法可以让Python类表现得像是内建序列类型(字典，元组，列表，字符串等)。</p>

<h3 id="toc_1">预备知识</h3>

<p>协议类似某些语言中的接口，里面包含的是一些必须实现的方法。在Python中，协议完全是非正式的，也不需要显式的声明，事实上，它们更像是一种参考标准。</p>

<p>在Python中实现自定义容器类型需要用到一些协议。首先，不可变容器类型有如下协议：想实现一个不可变容器，你需要定义 <code>__len__</code> 和 <code>__getitem__</code> (后面会具体说明）。可变容器的协议除了上面提到的两个方法之外，还需要定义 <code>__setitem__</code> 和 <code>__delitem__</code> 。最后，如果你想让你的对象可以迭代，你需要定义 <code>__iter__</code> ，这个方法返回一个迭代器。迭代器必须遵守迭代器协议，需要定义 <code>__iter__</code> （返回它自己）和 <code>next</code> 方法。</p>

<h3 id="toc_2">容器背后的魔法方法</h3>

<ul>
<li><p><code>__len__(self)</code><br/>
返回容器的长度，可变和不可变类型都需要实现。</p></li>
<li><p><code>__getitem__(self, key)</code><br/>
定义对容器中某一项使用 self[key] 的方式进行读取操作时的行为。这也是可变和不可变容器类型都需要实现的一个方法。它应该在键的类型错误式产生 <code>TypeError</code> 异常，同时在没有与键值相匹配的内容时产生 <code>KeyError</code> 异常。</p></li>
<li><p><code>__setitem__(self, key)</code><br/>
定义对容器中某一项使用 self[key] 的方式进行赋值操作时的行为。它是可变容器类型必须实现的一个方法，同样应该在合适的时候产生 <code>KeyError</code> 和 <code>TypeError</code> 异常。</p></li>
<li><p><code>__iter__(self, key)</code><br/>
它应该返回当前容器的一个迭代器。迭代器以一连串内容的形式返回，最常见的是使用<code>iter()</code>函数调用，以及在类似 for x in container: 的循环中被调用。迭代器是他们自己的对象，需要定义 <code>__iter__</code>方法并在其中返回自己。</p></li>
<li><p><code>__reversed__(self)</code><br/>
定义了对容器使用<code>reversed()</code>内建函数时的行为。它应该返回一个反转之后的序列。当你的序列类是有序时，类似列表和元组，再实现这个方法，</p></li>
<li><p><code>__contains__(self, item)</code><br/>
<code>__contains__</code>定义了使用<code>in</code>和<code>not in</code>进行成员测试时类的行为。你可能好奇为什么这个方法不是序列协议的一部分，原因是，如果<code>__contains__</code>没有定义，Python就会迭代整个序列，如果找到了需要的一项就返回<code>True</code>。</p></li>
<li><p><code>__missing__(self ,key)</code><br/>
<code>__missing__</code>在字典的子类中使用，它定义了当试图访问一个字典中不存在的键时的行为（目前为止是指字典的实例，例如我有一个字典 d ， “george” 不是字典中的一个键，当试图访问 d[“george’] 时就会调用 d.__missing__(“george”))。</p></li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/6/13</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14969929726510.html">
                
                  <h1>Python 类属性与实例属性</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Python属于动态语言，类属性很好体现了python动态语言这一特性。<br/>
对于属性，通常可以通过类属性和实例属性的形式调用。<br/>
看一个例子：</p>

<pre><code class="language-python">class AAA():
    aaa = 10
    
obj1 = AAA()
obj2 = AAA()
print(obj1.aaa, obj2.aaa, AAA.aaa) # result: 10 10 10

obj1.aaa += 2
print(obj1.aaa, obj2.aaa, AAA.aaa) # result: 12 10 10

AAA.aaa += 4
print(obj1.aaa,obj2.aaa,AAA.aaa)  # result: 12 14 14
</code></pre>

<p>上例中，<code>AAA.aaa</code>就属于<strong>类属性</strong>形式，<code>obj1.aaa</code>属于<strong>实例属性</strong>的形式</p>

<h2 id="toc_0">属性查找机制</h2>

<p>Python中属性查找是一个向上查找的机制，具体可参考下图所示：<br/>
       <img src="media/14969929726510/Screen%20Shot%202017-06-09%20at%203.39.06%20PM.png" alt="Screen Shot 2017-06-09 at 3.39.06 P"/></p>

<p>所以<br/>
* 当调用类属性<code>AAA.aaa</code>时，直接从<code>AAA</code>获取其属性<code>aaa</code><br/>
* 当调用实例属性<code>obj1.aaa</code>时，python按照由下到上的顺序查找属性，当<code>job1</code>和<code>job2</code>没有时，到类<code>AAA</code>中去查找</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/6/9</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14969760398302.html">
                
                  <h1>迭代器与生成器</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ul>
<li>
<a href="#toc_0">可迭代对象</a>
<ul>
<li>
<a href="#toc_1">判断是否可以迭代</a>
</li>
</ul>
</li>
<li>
<a href="#toc_2">迭代器</a>
<ul>
<li>
<a href="#toc_3">手动访问迭代器中的元素</a>
</li>
<li>
<a href="#toc_4">将可迭代对象转换成迭代器</a>
</li>
</ul>
</li>
<li>
<a href="#toc_5">生成器</a>
<ul>
<li>
<a href="#toc_6">生成器表达式</a>
</li>
<li>
<a href="#toc_7">生成器函数</a>
</li>
<li>
<a href="#toc_8">next()方法运行流程</a>
</li>
<li>
<a href="#toc_9">send()方法</a>
</li>
</ul>
</li>
</ul>


<p>迭代是Python中最强有力的特性之一。</p>

<h2 id="toc_0">可迭代对象</h2>

<p>迭代是访问集合元素的一种方式。迭代器是一个可以记住遍历的位置的对象。迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。迭代器只能往前不会后退。</p>

<p>以直接作用于for循环的数据类型有以下几种：</p>

<p>一类是集合数据类型，如list, tuple, dict, set, str等；<br/>
一类是generator,包括生成器和带yield的生成器函数(generator function).</p>

<p>这些可以直接作用于for循环的对象统称为可迭代对象：<code>Iterable</code></p>

<h3 id="toc_1">判断是否可以迭代</h3>

<p>可以使用<code>isinstance()</code>判断一个对象是否是<code>Iterable</code>对象：</p>

<pre><code class="language-python">from collections import Iterable

isinstance([], Iterable)
</code></pre>

<h2 id="toc_2">迭代器</h2>

<p>可以被<code>next()</code>函数调用并不断返回下一个值的对象称为迭代器：Iterator。</p>

<h3 id="toc_3">手动访问迭代器中的元素</h3>

<p>要手动访问可迭代对象中的元素，可以使用<code>next()</code>函数，然后自己编写代码来捕获<code>StopIteration</code>异常。例如，下面这个例子采用手工方式从文件中读取文本行：</p>

<pre><code class="language-python"># 打印hosts文件
with open(&#39;/etc/hosts&#39;) as f:
    try:
        while True:
            line = next(f)
            print(line, end=&#39;&#39;)
    except: StopIteration:
        pass
</code></pre>

<p>可以使用<code>isinstance()</code>判断一个对象是否是<code>Iterator</code>对象：</p>

<pre><code class="language-python">from collections import Iterator
isinstance((x for x in ragne(10)), Iterator)
</code></pre>

<h3 id="toc_4">将可迭代对象转换成迭代器</h3>

<p>把list, dict, str等可迭代对象变成迭代器，可以使用<code>iter()</code>函数</p>

<pre><code class="language-python">&gt;&gt;&gt; a = [11,22,33,44]
&gt;&gt;&gt; type(a)
&lt;class &#39;list&#39;&gt;
&gt;&gt;&gt; b=iter(a)
&gt;&gt;&gt; b
&lt;list_iterator object at 0x109ba3278&gt;
</code></pre>

<h2 id="toc_5">生成器</h2>

<p>如果列表元素可以按照某种算法推算出来，从而节省大量空间，即保存计算生成的方式，当需要时才生成。</p>

<p>生成器可以通过next()获得生成器的下一个返回值。</p>

<p>生成器的特点：<br/>
1. 节约内存<br/>
2. 迭代到下一次的调用时，所使用的参数都是第一次所保留下的</p>

<h3 id="toc_6">生成器表达式</h3>

<p><code>生成器表达式(generator expression)</code>: An expression that returns an iterator.</p>

<pre><code class="language-python">&gt;&gt;&gt;&gt; a = ( x for x in range(1,100))
&gt;&gt;&gt;&gt; a
&gt;&gt;&gt;&gt; &lt;generator object &lt;genexpr&gt; at 0x10ce60f10&gt; # 生成器表达式
</code></pre>

<h3 id="toc_7">生成器函数</h3>

<p>如果想实现一种新的迭代模式，可使用<code>生成器函数</code>来定义。函数中只要出现了<code>yield</code>语句就会讲其转变成一个生成器。一旦执行到<code>yield</code>语句，生成器函数返回，迭代停止。</p>

<pre><code class="language-python">def fib(times):
     &quot;&quot;&quot;
     斐波那契数列
     &quot;&quot;&quot;
     
     n =0
     a,b = 0,1
     while n&lt; times:
        yield b    #与函数的唯一区别是yield语句
        a,b = b, a+b
        n+=1
     return &#39;done&#39;

for n in fib(5):
    print(n)
</code></pre>

<h3 id="toc_8">next()方法运行流程</h3>

<p>当第一次调用生成器的<code>next</code>方法时，生成器开始执行生成器函数，从第一行代码开始执行，一直执行到<code>yield</code>语句后，生成器函数返回<code>yield</code>表达式的值。之后每一次调用生成器的<code>next</code>方法时，生成器从<code>yield</code>语句的下一句开始执行，直到再次遇到<code>yield</code>语句返回。</p>

<h3 id="toc_9">send()方法</h3>

<p>生成器对象首先是一个迭代器，但比一般迭代器对象多了一些方法，包括<code>send()</code>,<code>throw()</code>,<code>close()</code>方法；这些方法主要用与生成器对象的交互。</p>

<p>对于生成器，使用<code>send()</code>时，第一次需要<code>send(None)</code>，因为没有<code>yield</code>语句来接受参数。（<code>yield</code>执行完就跳出，对应变量没有赋值，看下面的例子）</p>

<p><code>send()</code>方法和<code>next()</code>方法类似，不同的是<code>send()</code>可以向生成器传参数。当<br/>
第一次调用生成器的<code>send()</code>方法时，从生成器函数的第一行代码开始执行，一直执行到yield语句后，生成器函数返回。注意这个过程中，变量一直没有赋值。当下一次运行时，变量才赋值，赋值的值来源于这一次的<code>send()</code>方法（不是上一次！而且第一次都是<code>None</code>），但并不执行yield部分，直到再次遇到<code>yield</code>语句返回。</p>

<pre><code class="language-python">&gt;&gt;&gt; def gen():
...     while True:
...         s = yield
...         print(s)
...
&gt;&gt;&gt; g = gen()
&gt;&gt;&gt; g.send()
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: send() takes exactly one argument (0 given)
&gt;&gt;&gt; g.send(None)  # 第一次需要传入参数None
&gt;&gt;&gt; g.send(&#39;Kiss&#39;) # 将参数赋值给变量s
Kiss
</code></pre>

<p><strong>注意： 不能将一个非None的值传给初始的生成器</strong></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/6/9</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14969731064895.html">
                
                  <h1>列表</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">列表生成式</h2>

<p>列表生成式,即List Comprehensions,Python内置的非常简单却强大的可以用来创建list的生成式。</p>

<p>例子</p>

<pre><code class="language-python">&gt;&gt;&gt;&gt; a = [ i for i in range(1,19)]
&gt;&gt;&gt;&gt; b = [i for i in ragne(10) if i%2 == 0]
&gt;&gt;&gt;&gt; c = [i for i in range(3) for j in range(2)]
&gt;&gt;&gt;&gt; d = [(i,j) for i in range(3) for j in range(2)]
</code></pre>

<h3 id="toc_1">range的风险</h3>

<pre><code class="language-python">&gt;&gt;&gt; range(1,1000000000)
</code></pre>

<p>内存空间太大，但在python3中已经解决: 在需要时，才生成</p>

<h2 id="toc_2">列表去重</h2>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/6/9</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14969760599335.html">
                
                  <h1>作用域</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">命名空间</h2>

<p>命名空间就是生效的范围</p>

<h2 id="toc_1">全局，局部</h2>

<p>查看局部变量</p>

<pre><code class="language-python">&gt;&gt;&gt;&gt; locals() 
</code></pre>

<p>查看全局变量</p>

<pre><code class="language-python">&gt;&gt;&gt;&gt; globals() 
</code></pre>

<h2 id="toc_2">LEGB规则</h2>

<p>python 使用<code>LEGB</code>的顺序来查找一个符号对应的对象</p>

<p>locals-&gt; enclosing function-&gt;globals-&gt;builtins</p>

<ul>
<li>locals, 当前所在命名空间（如函数、模块），函数的参数也属于命名空间中的变量</li>
<li>enclosing，外部嵌套函数的命名空间（闭包中常见）</li>
<li>globals, 全局变量，函数定义所在模块的命名空间</li>
<li>builtins, 内建模块的命名空间</li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/6/6</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14969760531704.html">
                
                  <h1>python是动态语言</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>C语言是静态语言，运行之前需要先编译，不允许在运行过程中修改代码。</p>

<p>动态编程语言，在运行时可以改变其结果的语言：例如新的函数、对象、甚至代码可以被引进，已有的函数可以被删除或是其他结构上的变化。</p>

<h2 id="toc_0">运行的过程中给实例/类添加属性(实例属性/类属性)</h2>

<pre><code class="language-python">class Person(object):
    def __init__(self, name=None, age=None):
             self.name = name
             self.age = age
P = Person(&#39;X man&#39;,&#39;24&#39;)
P.sex = &#39;male&#39;  # 给对象添加属性
Person.sex = &#39;female&#39; #给类添加属性
</code></pre>

<h2 id="toc_1">运行的过程中给实例/类添加方法</h2>

<p>给实例添加方法时，一般需使用<code>MethodType</code>函数。</p>

<pre><code class="language-python">class Person(object):
    def __init__(self, name=None, age=None):
             self.name = name
             self.age = age
    def eat(self):
        print(&#39;---%s is eating&#39;%self.name)
        
def run(self):
    print(&#39;---%s is running&#39;%self.name)
    
p1= Person(&#39;P1&#39;, 10)
p1.eat()
p1.run = run
#虽然p1对象中 run属性已经指向了第10行的函数，但是这句代码还不正确
#因为run属性的函数是后来添加的，即p1.run()的时候，并没有把p1当作第1个参数

import types
p1.run = types.MethodType(run,p1)
p1.run()
</code></pre>

<p>但是静态方法(static method)和类方法(class method)可以直接添加</p>

<pre><code class="language-python">@staticmethod
def test():
    print(&quot;---static method-----&quot;)
p1.test = test
p1.test()

@classmethod
def printNum(cls):
    print(&#39;----class method---&#39;)
    
Person.printNum = printNum
Person.printNum()
</code></pre>

<h2 id="toc_2">限制属性 __slots__</h2>

<p>定义一个特殊的__slot__变量，限制class实例能添加的属性</p>

<pre><code class="language-python">class Person(object):
    __slots__=(&quot;name&quot;,&quot;age&quot;)

p = Person()
p.name = &quot;老王&quot;
p.age = 10
p.score = 100
&gt;&gt;&gt;&gt; AttributeError: &#39;Person&#39; object has no attribute &#39;score&#39;
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/6/6</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14970764330712.html">
                
                  <h1>属性@property的使用</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h3 id="toc_0">为什么要使用<code>getter</code>和<code>setter</code>方法</h3>

<p>在绑定属性时，如果可以直接设置属性，虽然写起来很简单，但是没有办法检查参数，并且可以随意更改参数。</p>

<pre><code class="language-python">s = People()
s.salary = -1000
</code></pre>

<p>这显然不符合逻辑。为了限制salary的范围，可以通过一个<code>setSalary</code>方法来设置工资，再通过一个<code>getSalary</code>来获得工资，这样在<code>setSalary</code>方法里，就可以检查参数。</p>

<h3 id="toc_1">私有属性添加<code>getter</code>和<code>setter</code>方法</h3>

<pre><code class="language-python">class People(object):
    def __init__(self):
        self.__salary = 0
    def getSalary(self):
        return self.__salary
    def setSalary(self, value):
        if not isinstance(value, int):
            raise ValueError(&#39;Money must be an integer!&#39;)
        if value &lt;0 or value &gt; 10000:
            raise ValueError(&#39;Money must between 0~10000!&#39;)
        
        self.__salary = value
</code></pre>

<h3 id="toc_2">注意点</h3>

<p>t.num到底是调用<code>getter</code>还是<code>setter</code>，要根据实际的场景来判断，</p>

<ol>
<li>如果是给t.num赋值，那么一定调用<code>setNum()</code></li>
<li>如果是获取t.num的值，那么久一定调用<code>getNum()</code></li>
</ol>

<h3 id="toc_3">@property装饰器</h3>

<p>但是直接调用<code>getter()</code>和<code>setter()</code>比较复杂。Python内置的<code>@property</code>装饰器可以把这两种方法转化为属性进行调用。看一下例子：</p>

<pre><code class="language-python">class People(object):
    def __init__(self):
        self.__salary = 0
    
    @property
    def salary(self):
        return self.__salary
    
    @salary.setter
    def salary(self, value):
        if not isinstance(value, int):
            raise ValueError(&#39;Salary must be an integer!&#39;)
        if value &lt;0 or value &gt; 10000:
            raise ValueError(&#39;Salary must between 0~10000!&#39;)
        
        self.__salary = value
        
    @property
    def tax(self):
        self.__tax = self.__salary*0.1
        return self.__tax
</code></pre>

<p>当不定义setter方法时，那么就定义了一个只读属性(例子中<code>tax</code>属性是只读属性)。</p>

<p>@property 成为属性函数，可以对属性赋值时做必要的检查，并保证代码的清晰短小，主要有2个作用：</p>

<ol>
<li>将方法转换为只读</li>
<li>重新实现一个属性的设置和读取方法，可做边界判定</li>
</ol>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/5/10</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14969760733622.html">
                
                  <h1>Python 高级</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">模块重新导入</h2>

<p>模块导入： import xxx, from xxx import xxxx<br/>
增加路径 </p>

<pre><code class="language-python">import sys
sys.path.append(path)
</code></pre>

<p>模块重新导入</p>

<pre><code class="language-python">from imp import reload
reload(module name)
</code></pre>

<h2 id="toc_1">02 模块循环导入问题</h2>

<p>不可以循环导入，不能在模块之间相互调用</p>

<p>怎样避免循环导入：导入语句放在后面需要导入时再倒入，例如放在函数体内导入</p>

<h2 id="toc_2">03/04 ==与is的区别</h2>

<ul>
<li>== 判断值是否相等</li>
<li>Is  id(a), id(b)是否相等，<strong>比较两个引用是否指向了同一个对象（引用比较）</strong></li>
</ul>

<h2 id="toc_3">05-07 深拷贝与浅拷贝</h2>

<ul>
<li>浅拷贝是一个对象的顶层拷贝，拷贝了引用，并没有拷贝内容
= 就是浅拷贝</li>
<li>深拷贝是对于一个对象所有层次的拷贝（递归）
<code>python
import copy
c = copy.deepcopy(a)
</code>
copy.deepcopy深拷贝会把引用都拷贝出来（递归）
copy.copy() 
使用copy模块的copy功能的时候，它会根据当前拷贝的数据类型是可变类型还是不可变类型，有不同的处理方式：如果拷贝可变类型，只能识别第一层拷贝；如果拷贝不可变类型，是浅拷贝</li>
</ul>

<h2 id="toc_4">08 不同进制的讲解</h2>

<p>略</p>

<h2 id="toc_5">09 原码，反码，补码，进制的转换</h2>

<p>有符号数和无符号数的概念<br/>
规则：把二进制数中的最高位（最左边的那位）用作符号位</p>

<p>对于有符号数，最高位被计算机系统规定为符号位（0为正，1为负）<br/>
对于无符号数，最高位被计算机系统规定为数据位</p>

<p>数字在计算机中，是用二进制补码的形式来保存的，因此-1+1需要按照补码进行相加才是正确的结果</p>

<p>1）如何计算补码？<br/>
正数：原码=反码=补码<br/>
负数：反码=符号位不变，其他位取反<br/>
      补码=反码+1<br/>
溢出：越界<br/>
    2) 从补码转回原码<br/>
    负数补码转换原码的规则：<br/>
    原码=补码的符号位不变，数据位取反，尾+1</p>

<p>进制的转换 bin, int, oct, hex</p>

<p>0b 二进制<br/>
0o八进制<br/>
0x十六进制</p>

<p>转换成十进制 int(&quot;&quot;,16/8/2)</p>

<h2 id="toc_6">10 位运算</h2>

<p>把一个数的各位整体向左移动一个位，就变成原来的2倍</p>

<h3 id="toc_7">位运算的介绍</h3>

<ul>
<li>&amp; 按位于</li>
<li>|按位或</li>
<li><sup>按位异或</sup></li>
<li>～按位取反</li>
<li>&lt;&lt;按位左移 &gt;&gt;按位右移</li>
</ul>

<h3 id="toc_8">位运算</h3>

<ul>
<li>按位与： 全1才1否则0：只有对应的两个二进位均为1时，结果位才为1，否则为0</li>
<li>按位或：有1就1： 只要对应的二个二进位有一个位1时，结果位就为1，否则为0</li>
<li>按位异或：不同为1: 当对应的二进位不相同时，结果为1，否则为0</li>
</ul>

<h2 id="toc_9">12 私有化</h2>

<p>属性的名字前面加上下划线，属于私有属性，不能从外部调用的<br/>
方法：setNum(), getNum() 设置两个方法，一个设置属性，一个获取数据</p>

<ul>
<li>xx: 公有变量</li>
<li>_xx: 单前置下划线，私有化属性或方法，from somemodule import * 禁止导入，类对象和子类可以访问</li>
<li>__xx__: 双前后下划线，用于名字空间的魔法对象或属性。例如：__init__</li>
<li>__xx: 双前置下划线，私有，无法在外部直接访问（名子重整所以访问不到）</li>
<li>xx_: 单后置下划线，用于避免与python关键词的冲突</li>
</ul>

<p>通过name mangling （名字重整）,目的是防止类意外重写基类的方法或者属性：__classname__privateatribute</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/4/9</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14969760668045.html">
                
                  <h1>闭包，装饰器</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h3 id="toc_0">函数引用</h3>

<pre><code class="language-python">&gt;&gt;&gt; def test():
...     print(&#39;lala&#39;)
...
&gt;&gt;&gt; test()
lala
&gt;&gt;&gt; test
&lt;function test at 0x109a51950&gt; 

&gt;&gt;&gt; b = test  # b指向函数体test

&gt;&gt;&gt; b
&lt;function test at 0x109a51950&gt;

&gt;&gt;&gt; b()  # 通过引用调用函数
lala
</code></pre>

<h3 id="toc_1">闭包</h3>

<p>在函数内部再定义一个函数，并且这个函数用到了外边函数的变量，那么将这个函数以及用到的一些变量统称为闭包</p>

<pre><code class="language-python">def test(number):
  def test_in(number_in):
    print(&quot;in test_in, number_in is %d&quot;%number_in)
    return number+number_in
  return test_in

ret = test(100)  # ret 指向函数体
ret(1)  # 调用函数
</code></pre>

<p>闭包的实际例子：</p>

<pre><code class="language-python">def line_conf(a,b):
  def line(x):
    return a*x + b
  return line

line1 = line_conf(1,1)
line2 = line_conf(4,5)

print(line1(5))
print(line2(5))
</code></pre>

<ol>
<li>闭包又花了变量，原来需要类对象完成的工作，闭包也可以完成</li>
<li>由于必报引用了外部函数的局部变量，则外部函数的局部变量没有及时释放，消耗内存</li>
</ol>

<h2 id="toc_2">装饰器</h2>

<p>装饰器是程序开发中经常会用到的一个功能，用好了装饰器，开发效率如虎添翼。<br/>
* 只要python解释器执行到了装饰器代码部分，那么就会自动装饰，而不是等到调用的时候才装饰<br/>
* 有多个装饰器时，先执行后面的装饰</p>

<pre><code class="language-python">def w1(func):
  print(&#39;---正在装饰1-----&#39;)
  def inner():
    print(&#39;-----装在验证权限1------&#39;)
    func()
  return inner
  
def w2(func):
  print(&#39;---正在装饰2-----&#39;)
  def inner():
    print(&#39;-----装在验证权限2------&#39;)
    func()
  return inner

@w1
@w2
def f1():
  print(&quot;---f1---&quot;)

f1()

&gt;&gt;&gt;
---正在装饰2-----
---正在装饰1-----
-----装在验证权限1------
-----装在验证权限2------
---f1---
</code></pre>

<h3 id="toc_3">通用装饰器</h3>

<p>无参数、有参数、不定长参数、有返回值、无返回值 示例</p>

<pre><code class="language-python">def func(functionName):

  def func_in(*args, **kwargs):
    ret = functionName(*args, **kwargs)
    return ret
    
  return func_in
</code></pre>

<h3 id="toc_4">带有参数的装饰器</h3>

<p>同一个装饰器，在装饰不同函数时，起到不同的效果</p>

<pre><code class="language-python">def func_arg(arg):
    def func(functionName):
        def func_in():
            print(&quot;---记录日志-arg=%s--&quot;%arg)
            if arg==&quot;heihei&quot;:
                functionName()
                functionName()
            else:
                functionName()
        return func_in
    return func

#1. 先执行func_arg(&quot;heihei&quot;)函数,这个函数return 的结果是func这个函数的引用
#2. @func
#3. 使用@func对test进行装饰
@func_arg(&quot;heihei&quot;)
def test():
    print(&quot;--test--&quot;)

#带有参数的装饰器,能够起到在运行时,有不同的功能
@func_arg(&quot;haha&quot;)
def test2():
    print(&quot;--test2--&quot;)

test()
test2()
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/4/5</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Python%E7%89%B9%E6%80%A7.html'>Python特性</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="http://or9a8nskt.bkt.clouddn.com/figure.jpeg" /></div>
            
                <h1>techlarry</h1>
                <div class="site-des">他山之石，可以攻玉</div>
                <div class="social">









<a target="_blank" class="github" target="_blank" href="https://github.com/techlarry" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:wang.zhen.hua.larry@gmail.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="Python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95.html"><strong>Python数据结构与算法</strong></a>
        
            <a href="Python%E7%89%B9%E6%80%A7.html"><strong>Python特性</strong></a>
        
            <a href="%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0.html"><strong>机器学习</strong></a>
        
            <a href="Python%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E4%B8%89%E7%BB%B4%E5%8F%AF%E8%A7%86%E5%8C%96.html"><strong>Python科学计算三维可视化</strong></a>
        
            <a href="English.html"><strong>English</strong></a>
        
            <a href="%20%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA.html"><strong> 理解计算机</strong></a>
        
            <a href="Linux%20%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B.html"><strong>Linux 系统编程</strong></a>
        
            <a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html"><strong>数据库</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="bitwise%20operator%20in%20python.html">Bitwise Operation</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="%20Kruskals%20Algorithm:%20Max%20spacing%20k-clustering.html">Minimum Spanning Trees & Clustering</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="minimum_spanning_tree_prim_kruskal.html">Minimum Spanning Tree: Prim's and Kruskal's Algorithm</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="hash_table_5_hashable.html">Hash Table (5): Hashable</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="disjoint_set_data_structure.html">Disjoint-Set Data Structure</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2017
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
